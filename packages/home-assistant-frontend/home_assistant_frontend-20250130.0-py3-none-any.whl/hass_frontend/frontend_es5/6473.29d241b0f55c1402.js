"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["6473"],{20451:function(t,e,i){i.d(e,{Z:()=>o});i(23669);const a=(t,e=2)=>{let i=""+t;for(let a=1;a<e;a++)i=parseInt(i)<10**a?`0${i}`:i;return i};function o(t){const e=Math.floor(t/1e3/3600),i=Math.floor(t/1e3%3600/60),o=Math.floor(t/1e3%3600%60),s=Math.floor(t%1e3);return e>0?`${e}:${a(i)}:${a(o)}`:i>0?`${i}:${a(o)}`:o>0||s>0?`${o}${s>0?`.${a(s,3)}`:""}`:null}},31146:function(t,e,i){i.d(e,{i:()=>o});const a=(0,i(93826).P)((t=>{history.replaceState({scrollPosition:t},"")}),300),o=t=>e=>({kind:"method",placement:"prototype",key:e.key,descriptor:{set(t){a(t),this[`__${String(e.key)}`]=t},get(){var t;return this[`__${String(e.key)}`]||(null===(t=history.state)||void 0===t?void 0:t.scrollPosition)},enumerable:!0,configurable:!0},finisher(i){const a=i.prototype.connectedCallback;i.prototype.connectedCallback=function(){a.call(this);const i=this[e.key];i&&this.updateComplete.then((()=>{const e=this.renderRoot.querySelector(t);e&&setTimeout((()=>{e.scrollTop=i}),0)}))}}})},57982:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{A:()=>d});var o=i(46467),s=i(33570),r=t([o,s]);function l(t,e,i=0){return a=>{const r=new Date(a);if(i>88)return 0===r.getMonth()?`{bold|${(0,o.NC)(r,t,e)}}`:(0,o.Nh)(r,t,e);if(i>35)return 1===r.getDate()?`{bold|${(0,o.ud)(r,t,e)}}`:(0,o.ud)(r,t,e);if(i>7){const i=(0,o.ud)(r,t,e);return 1===r.getDate()?`{bold|${i}}`:i}return i>2?(0,o.U8)(r,t,e):0===r.getHours()&&0===r.getMinutes()&&0===r.getSeconds()?`{bold|${(0,o.ud)(r,t,e)}}`:(0,s.mr)(r,t,e)}}function d(t,e,i){return{formatter:l(t,e,i),rich:{bold:{fontWeight:"bold"}},hideOverlap:!0}}[o,s]=r.then?(await r)():r,a()}catch(n){a(n)}}))},25179:function(t,e,i){i.a(t,(async function(t,a){try{i.d(e,{Q:()=>x});var o=i(61701),s=i(72621),r=(i(71695),i(92745),i(19423),i(40251),i(39527),i(41360),i(47021),i(57243)),n=i(50778),l=i(69634),d=i(18672),h=i(60738),c=i(36522),u=i(94134),m=(i(23334),i(62201)),y=i(30635),v=i(50875),p=t([d]);d=(p.then?(await p)():p)[0];let f,k,g,_=t=>t;const b="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z",x=3e5;(0,o.Z)([(0,n.Mo)("ha-chart-base")],(function(t,e){class a extends e{constructor(...e){super(...e),t(this)}}return{F:a,d:[{kind:"field",key:"chart",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"data",value(){return[]}},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"options",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:String})],key:"height",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"external-hidden",type:Boolean})],key:"externalHidden",value(){return!1}},{kind:"field",decorators:[(0,n.SB)(),(0,h.F_)({context:y.LW,subscribe:!0})],key:"_themes",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_isZoomed",value(){return!1}},{kind:"field",key:"_modifierPressed",value(){return!1}},{kind:"field",key:"_isTouchDevice",value(){return"ontouchstart"in window}},{kind:"field",key:"_resizeController",value(){return new d.Z(this,{callback:()=>{var t;return null===(t=this.chart)||void 0===t?void 0:t.resize()}})}},{kind:"field",key:"_loading",value(){return!1}},{kind:"field",key:"_reducedMotion",value(){return!1}},{kind:"field",key:"_listeners",value(){return[]}},{kind:"method",key:"disconnectedCallback",value:function(){var t;for((0,s.Z)(a,"disconnectedCallback",this,3)([]);this._listeners.length;)this._listeners.pop()();null===(t=this.chart)||void 0===t||t.dispose()}},{kind:"method",key:"connectedCallback",value:function(){(0,s.Z)(a,"connectedCallback",this,3)([]),this.hasUpdated&&this._setupChart(),this._listeners.push((0,m.K)("(prefers-reduced-motion)",(t=>{var e;this._reducedMotion=t,null===(e=this.chart)||void 0===e||e.setOption({animation:!this._reducedMotion})})));const t=t=>{var e,i;(u.V&&t.metaKey||!u.V&&t.ctrlKey)&&(this._modifierPressed=!0,null!==(e=this.options)&&void 0!==e&&e.dataZoom||null===(i=this.chart)||void 0===i||i.setOption({dataZoom:this._getDataZoomConfig()}))},e=t=>{var e,i;(u.V&&"Meta"===t.key||!u.V&&"Control"===t.key)&&(this._modifierPressed=!1,null!==(e=this.options)&&void 0!==e&&e.dataZoom||null===(i=this.chart)||void 0===i||i.setOption({dataZoom:this._getDataZoomConfig()}))};window.addEventListener("keydown",t),window.addEventListener("keyup",e),this._listeners.push((()=>window.removeEventListener("keydown",t)),(()=>window.removeEventListener("keyup",e)))}},{kind:"method",key:"firstUpdated",value:function(){this._setupChart()}},{kind:"method",key:"willUpdate",value:function(t){(0,s.Z)(a,"willUpdate",this,3)([t]),this.hasUpdated&&this.chart&&(t.has("_themes")?this._setupChart():(t.has("data")&&this.chart.setOption({series:this.data},{lazyUpdate:!0,replaceMerge:["series"]}),(t.has("options")||t.has("_isZoomed"))&&this.chart.setOption(this._createOptions(),{lazyUpdate:!0,replaceMerge:["xAxis","yAxis","dataZoom","dataset","tooltip","legend","grid","visualMap"]})))}},{kind:"method",key:"render",value:function(){var t;return(0,r.dy)(f||(f=_` <div class="chart-container" style="${0}" @wheel="${0}"> <div class="chart"></div> ${0} </div> `),(0,l.V)({height:null!==(t=this.height)&&void 0!==t?t:`${this._getDefaultHeight()}px`}),this._handleWheel,this._isZoomed?(0,r.dy)(k||(k=_`<ha-icon-button class="zoom-reset" .path="${0}" @click="${0}" title="${0}"></ha-icon-button>`),b,this._handleZoomReset,this.hass.localize("ui.components.history_charts.zoom_reset")):r.Ld)}},{kind:"method",key:"_setupChart",value:async function(){if(this._loading)return;const t=this.renderRoot.querySelector(".chart");this._loading=!0;try{this.chart&&this.chart.dispose();const e=(await Promise.all([i.e("79525"),i.e("58884"),i.e("42974")]).then(i.bind(i,85803))).default;e.registerTheme("custom",this._createTheme()),this.chart=e.init(t,"custom"),this.chart.on("legendselectchanged",(t=>{if(this.externalHidden){t.selected[t.name]?(0,c.B)(this,"dataset-unhidden",{name:t.name}):(0,c.B)(this,"dataset-hidden",{name:t.name})}})),this.chart.on("datazoom",(t=>{var e,i;const{start:a,end:o}=null!==(e=null===(i=t.batch)||void 0===i?void 0:i[0])&&void 0!==e?e:t;this._isZoomed=0!==a||100!==o})),this.chart.on("click",(t=>{(0,c.B)(this,"chart-click",t)})),this.chart.on("mousemove",(t=>{var e;"series"===t.componentType&&"custom"===t.componentSubType&&(null===(e=this.chart)||void 0===e||null===(e=e.getZr())||void 0===e||e.setCursorStyle("default"))})),this.chart.setOption(Object.assign(Object.assign({},this._createOptions()),{},{series:this.data}))}finally{this._loading=!1}}},{kind:"method",key:"_getDataZoomConfig",value:function(){var t,e,i,a,o,s;const r=null!==(t=null===(e=this.options)||void 0===e||null===(e=e.xAxis)||void 0===e?void 0:e[0])&&void 0!==t?t:null===(i=this.options)||void 0===i?void 0:i.xAxis,n=null!==(a=null===(o=this.options)||void 0===o||null===(o=o.yAxis)||void 0===o?void 0:o[0])&&void 0!==a?a:null===(s=this.options)||void 0===s?void 0:s.yAxis;if("value"!==r.type||"category"!==n.type)return{id:"dataZoom",type:"inside",orient:"horizontal",filterMode:"none",moveOnMouseMove:this._isZoomed,preventDefaultMouseMove:this._isZoomed,zoomLock:!this._isTouchDevice&&!this._modifierPressed}}},{kind:"method",key:"_createOptions",value:function(){var t;const e=Object.assign({animation:!this._reducedMotion,darkMode:null!==(t=this._themes.darkMode)&&void 0!==t&&t,aria:{show:!0},dataZoom:this._getDataZoomConfig()},this.options);if(window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches&&e.tooltip){const t=Array.isArray(e.tooltip)?e.tooltip:[e.tooltip];t.forEach((t=>{t.confine=!0,t.appendTo=void 0})),e.tooltip=t}return e}},{kind:"method",key:"_createTheme",value:function(){const t=getComputedStyle(this);return{color:(0,v.o9)(t),backgroundColor:"transparent",textStyle:{color:t.getPropertyValue("--primary-text-color")},title:{textStyle:{color:t.getPropertyValue("--primary-text-color")},subtextStyle:{color:t.getPropertyValue("--secondary-text-color")}},line:{lineStyle:{width:1.5},symbolSize:1,symbol:"circle",smooth:!1},bar:{itemStyle:{barBorderWidth:1.5}},categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!1,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},legend:{textStyle:{color:t.getPropertyValue("--primary-text-color")},inactiveColor:t.getPropertyValue("--disabled-text-color")},tooltip:{axisPointer:{lineStyle:{color:t.getPropertyValue("--divider-color")},crossStyle:{color:t.getPropertyValue("--divider-color")}}},timeline:{}}}},{kind:"method",key:"_getDefaultHeight",value:function(){return Math.max(this.clientWidth/2,400)}},{kind:"method",key:"_handleZoomReset",value:function(){var t;null===(t=this.chart)||void 0===t||t.dispatchAction({type:"dataZoom",start:0,end:100})}},{kind:"method",key:"_handleWheel",value:function(t){var e;if(null===(e=this.options)||void 0===e||!e.dataZoom){const e=u.V&&t.metaKey||!u.V&&t.ctrlKey;var i;if(e&&t.preventDefault(),e!==this._modifierPressed)this._modifierPressed=e,null===(i=this.chart)||void 0===i||i.setOption({dataZoom:this._getDataZoomConfig()})}}},{kind:"field",static:!0,key:"styles",value(){return(0,r.iv)(g||(g=_`:host{display:block;position:relative}.chart-container{position:relative;max-height:var(--chart-max-height,400px)}.chart{width:100%;height:100%}.zoom-reset{position:absolute;top:16px;right:4px;background:var(--card-background-color);border-radius:4px;--mdc-icon-button-size:32px;color:var(--primary-color);border:1px solid var(--divider-color)}`))}}]}}),r.oi);a()}catch(f){a(f)}}))},67650:function(t,e,i){i.a(t,(async function(t,e){try{var a=i(61701),o=(i(71695),i(92745),i(19423),i(95078),i(39527),i(99790),i(41360),i(13334),i(36993),i(47021),i(57243)),s=i(50778),r=i(13809),n=i(69634),l=i(50875),d=i(20172),h=i(25179),c=i(64214),u=i(50602),m=i(57982),y=i(48066),v=i(36522),p=i(350),f=t([c,h,m,u]);[c,h,m,u]=f.then?(await f)():f;let k,g=t=>t;const _=t=>{const e=parseFloat(t);return isFinite(e)?e:null};let b=(0,a.Z)(null,(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"data",value(){return[]}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"unit",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"identifier",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"show-names",type:Boolean})],key:"showNames",value(){return!0}},{kind:"field",decorators:[(0,s.Cb)({attribute:"click-for-more-info",type:Boolean})],key:"clickForMoreInfo",value(){return!0}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"startTime",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"paddingYAxis",value(){return 0}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"chartIndex",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"logarithmic-scale",type:Boolean})],key:"logarithmicScale",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"minYAxis",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"maxYAxis",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"fit-y-data",type:Boolean})],key:"fitYData",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({type:String})],key:"height",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_chartData",value(){return[]}},{kind:"field",decorators:[(0,s.SB)()],key:"_entityIds",value(){return[]}},{kind:"field",key:"_datasetToDataIndex",value(){return[]}},{kind:"field",decorators:[(0,s.SB)()],key:"_chartOptions",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_yWidth",value(){return 25}},{kind:"field",key:"_chartTime",value(){return new Date}},{kind:"method",key:"render",value:function(){return(0,o.dy)(k||(k=g` <ha-chart-base .hass="${0}" .data="${0}" .options="${0}" .height="${0}" style="${0}"></ha-chart-base> `),this.hass,this._chartData,this._chartOptions,this.height,(0,n.V)({height:this.height}))}},{kind:"method",key:"_renderTooltip",value:function(t){return t.map(((t,e)=>{let i=`${(0,u.uf)(t.value[1],this.hass.locale,(0,u.l4)(void 0,this.hass.entities[this._entityIds[t.seriesIndex]]))} ${this.unit}`;const a=this._datasetToDataIndex[t.seriesIndex],o=this.data[a];if(o.statistics&&o.statistics.length>0){i+="<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";i+=0===o.states.length||t.value[0]<o.states[0].last_changed?`${this.hass.localize("ui.components.history_charts.source_stats")}`:`${this.hass.localize("ui.components.history_charts.source_history")}`}return`${0===e?(0,c.E8)(new Date(t.value[0]),this.hass.locale,this.hass.config)+"<br>":""}${t.marker} ${t.seriesName}: ${i}\n      `})).join("<br>")}},{kind:"method",key:"willUpdate",value:function(t){if((t.has("data")||t.has("startTime")||t.has("endTime")||this._chartTime<new Date(this.endTime.getTime()-h.Q))&&this._generateData(),!this.hasUpdated||t.has("showNames")||t.has("startTime")||t.has("endTime")||t.has("unit")||t.has("logarithmicScale")||t.has("minYAxis")||t.has("maxYAxis")||t.has("fitYData")||t.has("_chartData")||t.has("paddingYAxis")||t.has("_yWidth")){const t=(0,r.j)(this.endTime,this.startTime),e=(0,d.HE)(this.hass);this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime,axisLabel:(0,m.A)(this.hass.locale,this.hass.config,t),axisLine:{show:!1},splitLine:{show:!0},minInterval:t>=89?24192e5:t>2?864e5:void 0},yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,min:this.fitYData?this.minYAxis:void 0,max:this.fitYData?this.maxYAxis:void 0,position:e?"right":"left",scale:!0,nameGap:2,nameTextStyle:{align:"left"},axisLine:{show:!1},axisLabel:{margin:5,formatter:t=>{const e=(0,u.uf)(t,this.hass.locale),i=(0,y.U)(e,12)+5;return i>this._yWidth&&(this._yWidth=i,(0,v.B)(this,"y-width-changed",{value:this._yWidth,chartIndex:this.chartIndex})),e}}},legend:{show:this.showNames,icon:"circle",padding:[20,0]},grid:Object.assign(Object.assign({},this.showNames?{}:{top:30}),{},{left:e?1:Math.max(this.paddingYAxis,this._yWidth),right:e?Math.max(this.paddingYAxis,this._yWidth):1,bottom:30}),visualMap:this._chartData.map(((t,e)=>{var i,a;const o=this._datasetToDataIndex[e],s=this.data[o];if(!s.statistics||0===s.statistics.length)return!1;const r=null!==(i=null===(a=s.states[0])||void 0===a?void 0:a.last_changed)&&void 0!==i?i:this.endTime.getTime();return{show:!1,seriesIndex:e,dimension:0,pieces:[{max:r-.01,colorAlpha:.5},{min:r,colorAlpha:1}]}})).filter(Boolean),tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip.bind(this)}}}}},{kind:"method",key:"_generateData",value:function(){let t=0;const e=getComputedStyle(this),i=this.data,a=[],o=[],s=[];if(0===i.length)return;this._chartTime=new Date;const r=this.endTime,n=this.names||{};i.forEach(((i,d)=>{const h=i.domain,c=n[i.entity_id]||i.name;let u=null;const m=[],y=(t,e)=>{e&&(t>r||(m.forEach(((i,a)=>{null===e[a]&&u&&null!==u[a]&&i.data.push([t,u[a]]),i.data.push([t,e[a]])})),u=e))},v=(a,r,n=!1)=>{r||(r=(0,l.hZ)(t,e),t++),m.push({id:a,data:[],type:"line",cursor:"default",name:a,color:r,symbol:"circle",step:"end",symbolSize:1,lineStyle:{width:n?0:1.5},areaStyle:n?{color:r+"7F"}:void 0,tooltip:{show:!n}}),o.push(i.entity_id),s.push(d)};if("thermostat"===h||"climate"===h||"water_heater"===h){const t=i.states.some((t=>{var e;return null===(e=t.attributes)||void 0===e?void 0:e.hvac_action})),a="climate"===h&&t?t=>{var e;return"heat"===p.hB[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:t=>"heat"===t.state,o="climate"===h&&t?t=>{var e;return"cool"===p.hB[null===(e=t.attributes)||void 0===e?void 0:e.hvac_action]}:t=>"cool"===t.state,s=i.states.some(a),r=i.states.some(o),n=i.states.some((t=>t.attributes&&t.attributes.target_temp_high!==t.attributes.target_temp_low));v(`${this.hass.localize("ui.card.climate.current_temperature",{name:c})}`),s&&v(`${this.hass.localize("ui.card.climate.heating",{name:c})}`,e.getPropertyValue("--state-climate-heat-color"),!0),r&&v(`${this.hass.localize("ui.card.climate.cooling",{name:c})}`,e.getPropertyValue("--state-climate-cool-color"),!0),n?(v(`${this.hass.localize("ui.card.climate.target_temperature_mode",{name:c,mode:this.hass.localize("ui.card.climate.high")})}`),v(`${this.hass.localize("ui.card.climate.target_temperature_mode",{name:c,mode:this.hass.localize("ui.card.climate.low")})}`)):v(`${this.hass.localize("ui.card.climate.target_temperature_entity",{name:c})}`),i.states.forEach((t=>{if(!t.attributes)return;const e=_(t.attributes.current_temperature),i=[e];if(s&&i.push(a(t)?e:null),r&&i.push(o(t)?e:null),n){const e=_(t.attributes.target_temp_high),a=_(t.attributes.target_temp_low);i.push(e,a),y(new Date(t.last_changed),i)}else{const e=_(t.attributes.temperature);i.push(e),y(new Date(t.last_changed),i)}}))}else if("humidifier"===h){const t=i.states.some((t=>{var e;return null===(e=t.attributes)||void 0===e?void 0:e.action})),a=i.states.some((t=>{var e;return null===(e=t.attributes)||void 0===e?void 0:e.current_humidity})),o=t&&i.states.some((t=>{var e;return"humidifying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)})),s=t&&i.states.some((t=>{var e;return"drying"===(null===(e=t.attributes)||void 0===e?void 0:e.action)}));v(`${this.hass.localize("ui.card.humidifier.target_humidity_entity",{name:c})}`),a&&v(`${this.hass.localize("ui.card.humidifier.current_humidity_entity",{name:c})}`),o?v(`${this.hass.localize("ui.card.humidifier.humidifying",{name:c})}`,e.getPropertyValue("--state-humidifier-on-color"),!0):s?v(`${this.hass.localize("ui.card.humidifier.drying",{name:c})}`,e.getPropertyValue("--state-humidifier-on-color"),!0):v(`${this.hass.localize("ui.card.humidifier.on_entity",{name:c})}`,void 0,!0),i.states.forEach((t=>{var e;if(!t.attributes)return;const i=_(t.attributes.humidity),r=a?_(null===(e=t.attributes)||void 0===e?void 0:e.current_humidity):i,n=[i];var l;if(a&&n.push(r),o)n.push("humidifying"===(null===(l=t.attributes)||void 0===l?void 0:l.action)?r:null);else if(s){var d;n.push("drying"===(null===(d=t.attributes)||void 0===d?void 0:d.action)?r:null)}else n.push("on"===t.state?r:null);y(new Date(t.last_changed),n)}))}else{let t,e;v(c);let a=null;const o=i=>{const o=_(i.state),s=new Date(i.last_changed);if(null!==o&&a){var r;const i=s.getTime(),n=a.getTime(),l=null===(r=e)||void 0===r?void 0:r.getTime();y(a,[(n-l)/(i-l)*(o-t)+t]),y(new Date(n+1),[null]),y(s,[o]),e=s,t=o,a=null}else null!==o&&null===a?(y(s,[o]),e=s,t=o):null===o&&null===a&&void 0!==t&&(a=s)};if(i.statistics){const t=i.states&&0!==i.states.length?i.states[0].last_changed:0;for(const e of i.statistics){if(t&&e.last_changed>=t)break;o(e)}}i.states.forEach((t=>{o(t)})),null!==a&&y(a,[null])}y(r,u),Array.prototype.push.apply(a,m)})),this._chartData=a,this._entityIds=o,this._datasetToDataIndex=s}}]}}),o.oi);customElements.define("state-history-chart-line",b),e()}catch(k){e(k)}}))},15815:function(t,e,i){i.a(t,(async function(t,e){try{var a=i(61701),o=(i(71695),i(92745),i(19423),i(39527),i(41360),i(47021),i(57243)),s=i(50778),r=i(13809),n=i(64214),l=i(20451),d=i(20172),h=i(25179),c=i(31428),u=i(85803),m=i(37723),y=i(11259),v=i(48066),p=i(36522),f=i(57982),k=t([n,h,f]);[n,h,f]=k.then?(await k)():k;let g,_,b=t=>t;(0,a.Z)([(0,s.Mo)("state-history-chart-timeline")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"data",value(){return[]}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"unit",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"identifier",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"show-names",type:Boolean})],key:"showNames",value(){return!0}},{kind:"field",decorators:[(0,s.Cb)({attribute:"click-for-more-info",type:Boolean})],key:"clickForMoreInfo",value(){return!0}},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"chunked",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"startTime",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"paddingYAxis",value(){return 0}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"chartIndex",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_chartData",value(){return[]}},{kind:"field",decorators:[(0,s.SB)()],key:"_chartOptions",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_yWidth",value(){return 0}},{kind:"field",key:"_chartTime",value(){return new Date}},{kind:"method",key:"render",value:function(){return(0,o.dy)(g||(g=b` <ha-chart-base .hass="${0}" .options="${0}" .height="${0}" .data="${0}" @chart-click="${0}"></ha-chart-base> `),this.hass,this._chartOptions,30*this.data.length+30+"px",this._chartData,this._handleChartClick)}},{kind:"field",key:"_renderItem",value(){return(t,e)=>{const i=e.value(0),a=e.coord([e.value(1),i]),o=e.coord([e.value(2),i]),s=t.coordSys,r=u.default.graphic.clipRectByRect({x:a[0],y:a[1]-10,width:o[0]-a[0],height:20},{x:s.x,y:s.y,width:s.width,height:s.height});if(!r)return null;const n={type:"rect",transition:"shape",shape:r,style:{fill:e.value(4)}},l=e.value(3);return(0,v.U)(l,12)<r.width-8?{type:"group",children:[n,{type:"text",style:Object.assign(Object.assign({},r),{},{x:r.x+4,text:l,fill:e.value(5),fontSize:12,lineHeight:r.height})}]}:n}}},{kind:"field",key:"_renderTooltip",value(){return t=>{const{value:e,name:i,marker:a}=Array.isArray(t)?t[0]:t,o=`<h4 style="text-align: center; margin: 0;">${e[0]}</h4>`,s=e[2]-e[1],r=`${this.hass.localize("ui.components.history_charts.duration")}: ${(0,l.Z)(s)}`;return[o,[a+i,(0,n.E8)(new Date(e[1]),this.hass.locale,this.hass.config),(0,n.E8)(new Date(e[2]),this.hass.locale,this.hass.config),r].join("<br>")].join("")}}},{kind:"method",key:"willUpdate",value:function(t){(t.has("startTime")||t.has("endTime")||t.has("data")||this._chartTime<new Date(this.endTime.getTime()-h.Q))&&this._generateData(),(!this.hasUpdated||t.has("startTime")||t.has("endTime")||t.has("showNames")||t.has("paddingYAxis")||t.has("_yWidth"))&&this._createOptions()}},{kind:"method",key:"_createOptions",value:function(){const t=this.narrow,e=this.chunked||this.showNames,i=t?70:165,a=e?Math.max(this.paddingYAxis,this._yWidth):0,o=(0,d.HE)(this.hass),s=(0,r.j)(this.endTime,this.startTime);this._chartOptions={xAxis:{type:"time",min:this.startTime,max:this.endTime,axisTick:{show:!0},splitLine:{show:!1},axisLine:{show:!1},axisLabel:(0,f.A)(this.hass.locale,this.hass.config,s),minInterval:s>=89?24192e5:s>2?864e5:void 0},yAxis:{type:"category",inverse:!0,position:o?"right":"left",triggerEvent:!0,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:e,width:a-5,overflow:"truncate",margin:5,formatter:t=>{const e=Math.min((0,v.U)(t,12)+5,i);return e>this._yWidth&&(this._yWidth=e,(0,p.B)(this,"y-width-changed",{value:this._yWidth,chartIndex:this.chartIndex})),t},hideOverlap:!0}},grid:{top:10,bottom:30,left:o?1:a,right:o?a:1},tooltip:{appendTo:document.body,formatter:this._renderTooltip}}}},{kind:"method",key:"_generateData",value:function(){const t=getComputedStyle(this);let e=this.data;e||(e=[]),this._chartTime=new Date;const i=this.startTime,a=this.endTime,o=[],s=this.names||{};e.forEach((e=>{let r,n=null,l=null,d=i;const h=s[e.entity_id]||e.name,u=[];if(e.data.forEach((i=>{let o=i.state;if(o||(o=null),!(new Date(i.last_changed)>a))if(null===n)n=o,l=i.state_localize,d=new Date(i.last_changed);else if(o!==n){r=new Date(i.last_changed);const a=(0,c.U)(n,t,this.hass.states[e.entity_id]);u.push({value:[h,d,r,l,a,(0,m.T2)((0,y.wK)(a))>.5?"#000":"#fff"],itemStyle:{color:a}}),n=o,l=i.state_localize,d=r}})),null!==n){const i=(0,c.U)(n,t,this.hass.states[e.entity_id]);u.push({value:[h,d,a,l,i,(0,m.T2)((0,y.wK)(i))>.5?"#000":"#fff"],itemStyle:{color:i}})}o.push({data:u,name:h,dimensions:["index","start","end","name","color","textColor"],type:"custom",encode:{x:[1,2],y:0,itemName:3},renderItem:this._renderItem})})),this._chartData=o}},{kind:"method",key:"_handleChartClick",value:function(t){if("axisLabel"===t.detail.targetType){const e=this.data[t.detail.dataIndex];e&&(0,p.B)(this,"hass-more-info",{entityId:e.entity_id})}}},{kind:"field",static:!0,key:"styles",value(){return(0,o.iv)(_||(_=b`ha-chart-base{--chart-max-height:none}`))}}]}}),o.oi);e()}catch(g){e(g)}}))},71489:function(t,e,i){i.a(t,(async function(t,e){try{var a=i(61701),o=(i(19083),i(71695),i(92745),i(52805),i(61006),i(39527),i(13334),i(34595),i(36993),i(47021),i(57243)),s=i(50778),r=i(72344),n=i(31146),l=i(47641),d=i(67650),h=i(15815),c=t([d,h]);[d,h]=c.then?(await c)():c;let u,m,y,v,p,f,k,g,_,b=t=>t;const x=10,w=(t,e)=>t.reduce(((t,i,a)=>{const o=Math.floor(a/e);return t[o]||(t[o]=[]),t[o].push(i),t}),[]);(0,a.Z)([(0,s.Mo)("state-history-charts")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"historyData",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,reflect:!0})],key:"virtualize",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"startTime",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,attribute:"up-to-now"})],key:"upToNow",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"hoursToShow",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"show-names",type:Boolean})],key:"showNames",value(){return!0}},{kind:"field",decorators:[(0,s.Cb)({attribute:"click-for-more-info",type:Boolean})],key:"clickForMoreInfo",value(){return!0}},{kind:"field",decorators:[(0,s.Cb)({attribute:"is-loading-data",type:Boolean})],key:"isLoadingData",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({attribute:"logarithmic-scale",type:Boolean})],key:"logarithmicScale",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"minYAxis",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1,type:Number})],key:"maxYAxis",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:"fit-y-data",type:Boolean})],key:"fitYData",value(){return!1}},{kind:"field",decorators:[(0,s.Cb)({type:String})],key:"height",value:void 0},{kind:"field",key:"_computedStartTime",value:void 0},{kind:"field",key:"_computedEndTime",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_maxYWidth",value(){return 0}},{kind:"field",decorators:[(0,s.SB)()],key:"_childYWidths",value(){return[]}},{kind:"field",decorators:[(0,s.SB)()],key:"_chartCount",value(){return 0}},{kind:"field",decorators:[(0,n.i)(".container")],key:"_savedScrollPos",value:void 0},{kind:"method",key:"render",value:function(){if(!(0,r.p)(this.hass,"history"))return(0,o.dy)(u||(u=b`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.history_charts.history_disabled"));if(this.isLoadingData&&!this.historyData)return(0,o.dy)(m||(m=b`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.history_charts.loading_history"));if(this._isHistoryEmpty())return(0,o.dy)(y||(y=b`<div class="info"> ${0} </div>`),this.hass.localize("ui.components.history_charts.no_history_found"));const t=this.historyData.timeline.length?(this.virtualize?w(this.historyData.timeline,x):[this.historyData.timeline]).concat(this.historyData.line):this.historyData.line;return this._chartCount=t.length,this.virtualize?(0,o.dy)(v||(v=b`<div class="container ha-scrollbar" @scroll="${0}"> <lit-virtualizer scroller class="ha-scrollbar" .items="${0}" .renderItem="${0}"> </lit-virtualizer> </div>`),this._saveScrollPos,t,this._renderHistoryItem):(0,o.dy)(p||(p=b`${0}`),t.map(((t,e)=>this._renderHistoryItem(t,e))))}},{kind:"field",key:"_renderHistoryItem",value(){return(t,e)=>t&&void 0!==e?Array.isArray(t)?(0,o.dy)(g||(g=b`<div class="entry-container"> <state-history-chart-timeline .hass="${0}" .data="${0}" .startTime="${0}" .endTime="${0}" .showNames="${0}" .names="${0}" .narrow="${0}" .chunked="${0}" .paddingYAxis="${0}" .chartIndex="${0}" .clickForMoreInfo="${0}" @y-width-changed="${0}"></state-history-chart-timeline> </div> `),this.hass,t,this._computedStartTime,this._computedEndTime,this.showNames,this.names,this.narrow,this.virtualize,this._maxYWidth,e,this.clickForMoreInfo,this._yWidthChanged):(0,o.dy)(k||(k=b`<div class="entry-container line"> <state-history-chart-line .hass="${0}" .unit="${0}" .data="${0}" .identifier="${0}" .showNames="${0}" .startTime="${0}" .endTime="${0}" .paddingYAxis="${0}" .names="${0}" .chartIndex="${0}" .clickForMoreInfo="${0}" .logarithmicScale="${0}" .minYAxis="${0}" .maxYAxis="${0}" .fitYData="${0}" @y-width-changed="${0}" .height="${0}"></state-history-chart-line> </div> `),this.hass,t.unit,t.data,t.identifier,this.showNames,this._computedStartTime,this._computedEndTime,this._maxYWidth,this.names,e,this.clickForMoreInfo,this.logarithmicScale,this.minYAxis,this.maxYAxis,this.fitYData,this._yWidthChanged,this.virtualize?void 0:this.height):(0,o.dy)(f||(f=b``))}},{kind:"method",key:"shouldUpdate",value:function(t){return(1!==t.size||!t.has("hass"))&&(1!==t.size||!t.has("_maxYWidth")||t.get("_maxYWidth")!==this._maxYWidth)}},{kind:"method",key:"willUpdate",value:function(t){if(this.hasUpdated||(0,l.o)(),[...t.keys()].some((t=>!["_maxYWidth","_childYWidths","_chartCount"].includes(t)))){const t=new Date;if(this._computedEndTime=this.upToNow||!this.endTime||this.endTime>t?t:this.endTime,this.startTime)this._computedStartTime=this.startTime;else if(this.hoursToShow)this._computedStartTime=new Date((new Date).getTime()-3600*this.hoursToShow*1e3);else{var e,i,a,o;let t=(null!==(e=null===(i=this.historyData)||void 0===i?void 0:i.timeline)&&void 0!==e?e:[]).reduce(((t,e)=>Math.min(t,new Date(e.data[0].last_changed).getTime())),(new Date).getTime());t=(null!==(a=null===(o=this.historyData)||void 0===o?void 0:o.line)&&void 0!==a?a:[]).reduce(((t,e)=>Math.min(t,e.data.reduce(((t,e)=>Math.min(t,new Date(e.states[0].last_changed).getTime())),t))),t),this._computedStartTime=new Date(t)}}}},{kind:"method",key:"updated",value:function(t){t.has("_chartCount")&&this._chartCount<this._childYWidths.length&&(this._childYWidths.length=this._chartCount,this._maxYWidth=Math.max(...Object.values(this._childYWidths),0))}},{kind:"method",key:"_yWidthChanged",value:function(t){this._childYWidths[t.detail.chartIndex]=t.detail.value,this._maxYWidth=Math.max(...Object.values(this._childYWidths),0)}},{kind:"method",key:"_isHistoryEmpty",value:function(){const t=!this.historyData||!this.historyData.timeline||!this.historyData.line||0===this.historyData.timeline.length&&0===this.historyData.line.length;return!this.isLoadingData&&t}},{kind:"method",decorators:[(0,s.hO)({passive:!0})],key:"_saveScrollPos",value:function(t){this._savedScrollPos=t.target.scrollTop}},{kind:"field",static:!0,key:"styles",value(){return(0,o.iv)(_||(_=b`:host{display:flex;flex-direction:column;min-height:60px}:host([virtualize]){height:100%}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}.container{max-height:var(--history-max-height)}.entry-container{width:100%}.entry-container.line{flex:1}.entry-container:hover{z-index:1}:host([virtualize]) .entry-container{padding-left:1px;padding-right:1px;padding-inline-start:1px;padding-inline-end:1px}.entry-container:not(:first-child){border-top:2px solid var(--divider-color);margin-top:16px}.container,lit-virtualizer{height:100%;width:100%}lit-virtualizer{contain:size layout!important}state-history-chart-line,state-history-chart-timeline{width:100%}`))}}]}}),o.oi);e()}catch(u){e(u)}}))},85803:function(t,e,i){i.r(e),i.d(e,{default:()=>k});var a=i(1420),o=i(88375),s=i(33755),r=i(76504),n=i(86596),l=i(94439),d=i(7521),h=i(18063),c=i(32169),u=i(88232),m=i(63542),y=i(29022),v=i(40716),p=i(32687),f=i(91475);a.D([s.N,r.N,n.N,l.N,d.N,h.N,c.N,u.N,m.N,y.N,v.T,p.z,f.N]);const k=o},47641:function(t,e,i){i.d(e,{o:()=>a});i(71695),i(40251),i(47021);const a=async()=>{await Promise.all([i.e("37066"),i.e("33845")]).then(i.bind(i,24700))}},94134:function(t,e,i){i.d(e,{V:()=>a});i(19134),i(5740);const a=/Mac/i.test(navigator.userAgent)},48066:function(t,e,i){let a;function o(t,e,i="sans-serif"){a||(a=document.createElement("canvas"));const o=a.getContext("2d");return o?(o.font=`${e}px ${i}`,Math.ceil(o.measureText(t).width)):0}i.d(e,{U:()=>o})}}]);
//# sourceMappingURL=6473.29d241b0f55c1402.js.map