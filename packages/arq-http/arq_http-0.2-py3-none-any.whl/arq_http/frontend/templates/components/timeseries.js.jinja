var plotDiv = document.getElementById("{{ parent_id }}");
var plotElement = document.getElementById("{{ plot_id }}");

var plotWidth = Math.floor(plotElement.offsetWidth);
var plotHeight = Math.floor(plotElement.offsetWidth * (2.0/3.0));

var plotData = [
  {{ x }},
  {{ y }}
];

var plotOpts = {
  title: "[{{ title_label }}] {{ title_prefix }}: {{ y_label }}",
  id: "{{ plot_id }}",
  class: "viz-item",
  width: plotWidth,
  height: plotHeight,
  scales: {
    x: {
      time: {{ is_time_col }},
    },
  },
  series: [
    {
      label: "{{ x_label }}",
    },
    {
      show: true,
      spanGaps: false,
      label: "{{ y_label }}",
      stroke: "blue",
      width: 1,
    },
  ],
};

plotElement.remove()
var plot = new uPlot(plotOpts, plotData, plotDiv);
