var plotDiv = document.getElementById("{{ parent_id }}");
var plotElement = document.getElementById("{{ plot_id }}");

var plotWidth = Math.floor(plotElement.offsetWidth);
var plotHeight = Math.floor(plotElement.offsetWidth * (2.0/3.0));

var plotdData = [
  {{ x }},
  {{ y }}
];

var bars = uPlot.paths.bars({
  align: 1,
  size: [1, Infinity],
  gap: 0,
});

var plotOpts = {
  title: "[{{ title_label }}] Histogram: {{ variable }}",
  id: "{{ plot_id }}",
  class: "viz-item",
  width: plotWidth,
  height: plotHeight,
  scales: {
    x: {
      time: false,
      dir: 1,
    },
  },
  series: [
    {
      label: "{{ variable }}",
    },
    {
      width: 1,
      stroke: "#00f",
      fill: "rgb(0,0,255,0.1)",
      paths: bars,
      label: "count",
    },
  ],
};

plotElement.remove()
var plot = new uPlot(plotOpts, plotdData, plotDiv);
