<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>trnbl.loggers.local.html_frontend API documentation</title>
<link rel="stylesheet" href="../../../resources/bootstrap-reboot.min.css"><link rel="stylesheet" href="../../../resources/syntax-highlighting.css"><link rel="stylesheet" href="../../../resources/theme.css"><link rel="stylesheet" href="../../../resources/layout.css"><link rel="stylesheet" href="../../../resources/content.css"><link rel="stylesheet" href="../../../resources/custom.css"><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
        overflow-y: hidden;
    }
</style><style>
    .pdoc .mermaid-pre {
        border: none;
        background: none;
    }
</style>
<script type="module" defer>
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs";

    /* Re-invoke Mermaid when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => mermaid.run()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script></head>
<body>
<div class="package-version">
    docs for <a href="https://github.com/mivanit/trnbl">trnbl</a> v0.1.1<br>
</div>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button">
            <img src="../../../resources/svg/navtoggle.svg" alt="Toggle navigation"> 
        </label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../local.html">
                <img src="../../../resources/svg/box-arrow-in-left.svg" alt="Back to parent module"/>
                &nbsp;trnbl.loggers.local</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#get_html_frontend">get_html_frontend</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span>
            <img src="../../../resources/svg/pdoc-logo.svg" alt="pdoc logo"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                        <a class="pdoc-button git-button" href="https://github.com/mivanit/trnbl/blob/0.1.1/loggers/local/html_frontend.py">View Source on GitHub</a>
                    <h1 class="modulename">
<a href="./../../../trnbl.html">trnbl</a><wbr>.<a href="./../../loggers.html">loggers</a><wbr>.<a href="./../local.html">local</a><wbr>.html_frontend    </h1>

                
                        <input id="mod-html_frontend-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="mod-html_frontend-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/trnbl/blob/0.1.1/loggers/local/html_frontend.py#L0-L5" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

                <br/>
                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">1</span></a><span class="k">def</span><span class="w"> </span><span class="nf">get_html_frontend</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">2</span></a>	<span class="k">return</span> <span class="s1">&#39;&lt;!-- trnbl v0.1.0 https://miv.name/trnbl --&gt;</span><span class="se">\n</span><span class="s1">&lt;!doctypehtml&gt;&lt;title&gt;trnbl dashboard&lt;/title&gt;&lt;script src=https://cdn.plot.ly/plotly-latest.min.js&gt;&lt;/script&gt;&lt;script src=https://unpkg.com/interactjs/dist/interact.min.js&gt;&lt;/script&gt;&lt;script src=https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js&gt;&lt;/script&gt;&lt;script src=https://unpkg.com/feather-icons&gt;&lt;/script&gt;&lt;style&gt;*,svg{font-family:Roboto-mono,monospace}.draggable:hover{z-index:999;border:1px solid #00f;transition-delay:.5s}.draggable{transition:z-index .5s}.draggable:not(:hover){transition-delay:.5s}.ag-icon{font-family:agGridAlpine!important}option{font-size:2em!important}.rootContainer</span><span class="si">{height:100%}</span><span class="s1">.plotContainer,.runsManifestBox{background-color:#f0f0f0;border:1px solid #000;border-radius:10px;padding:3px}.plotSettings{margin-left:2px}.headerButton{cursor:pointer;color:#000;text-align:center;background-color:#d8d8d8;border:1px solid #3c3c3c;border-radius:5px;height:35px;padding:0 10px;font-size:16px;line-height:30px;transition:background-color .1s,border-color .1s,color .1s;display:inline-block}.headerButton:hover,.headerButton:focus{color:#000;background-color:#797979;border-color:#213244}.headerButton svg{vertical-align:middle}hr{border:none;border-top:1px solid #ccc;margin-top:10px}.axis-toggle-container{margin-top:10px}.switch{width:3em;height:1.5em;display:inline-block;position:relative}.switch input{opacity:0;width:0;height:0}.slider{cursor:pointer;background-color:#ccc;-webkit-transition:all .4s;transition:all .4s;position:absolute;inset:0}.slider:before{content:&quot;&quot;;background-color:#fff;width:1em;height:1em;-webkit-transition:all .4s;transition:all .4s;position:absolute;bottom:4px;left:4px}input:checked+.slider{background-color:#2196f3}input:focus+.slider{box-shadow:0 0 1px #2196f3}input:checked+.slider:before{-webkit-transform:translate(1.5em);-ms-transform:translate(1.5em);transform:translate(1.5em)}.slider.round{border-radius:34px}.slider.round:before{border-radius:50%}@keyframes blinkButton{0%{background-color:#d8d8d8}50%{background-color:#b5d8c9}to{background-color:#d8d8d8}}.blink-border{animation:.5s ease-in-out blinkButton}&lt;/style&gt;&lt;link href=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAMUExURRwfKv////5MRBel/pJJVGsAAAAJcEhZcwAADsIAAA7CARUoSoAAAAFdSURBVDjLnZNNTsMwEEbHsSJBNmzaO0BO4Ta7riLR7llWPUUQFwnqxtzCYLFhw1V6BL7xT+zEFRK4alW/zPdstTP0v3WYlt/XCfS+oI+ltSsR+xReK8YqAcHF69zP1Su8q4FImrDZC0XNSHR3CeU9QKsDqNkDoFuOIIQTGFRjM0CDGgZHobAdoQFAtTgJhYCGBhEGu2cFZcuaamCwfd2O0jTQ4HQG6m03SFNBE8HDyd9Sh4i6PUrLd4DESbv3Jw8gCUB5AEkOrIFkASDxoLMMrIEkA3hBMgFrP14guUnANGdI7heg0bOINVUE7gwc3EaAp9bFIvg6e0AFoEVkAiz1JDv2N/D5iO/uwxoGh3xtroEUwU8yl2bAX6QA4RQlOuP6x35fKAL+b2eAG07Gm3rAkSDtXYQRmix0IXGXRkAeuC6Vpg6tneYj9Pu0VtfGoxigYsSKISzHtBjkvy2iH6CFB7azg+vPAAAAAElFTkSuQmCC rel=icon&gt;&lt;script&gt;var createColumnDefs=(a=&gt;{let m=0,n=null,g=`div`,r=``,s=`object`,l=1,h=`center`,o=`open`,i=`eye`,p=`Config`,j=`eye-off`,k=Date,t=JSON.stringify,q=undefined;var b=[{headerName:`View/Hide`,field:`visible`,width:100,cellRenderer:a=&gt;{const b=document.createElement(g);b.className=`ag-cell-wrapper`;b.style.display=`flex`;b.style.alignItems=h;b.style.justifyContent=h;const c=document.createElement(`input`);c.type=`checkbox`;c.checked=a.value!==!1;c.style.marginRight=`5px`;const d=document.createElement(g);d.innerHTML=feather.icons[c.checked?i:j].toSvg();d.style.pointerEvents=`none`;b.appendChild(c);b.appendChild(d);const e=b=&gt;{a.setValue(b);c.checked=b;d.innerHTML=feather.icons[b?i:j].toSvg();PLOT_MANAGER.updateTraceVisibility(a.data.id.syllabic,b)};c.addEventListener(`change`,()=&gt;e(c.checked));b.addEventListener(`click`,a=&gt;{if(a.target!==c){e(!c.checked)}});return b}}];const c={filter:`agDateColumnFilter`,filterParams:{comparator:((a,b)=&gt;{const c=new k(b);const d=new k(a);if(c&lt;d){return -l}else if(c&gt;d){return l};return m}),browserDatePicker:!1,inRangeInclusive:!0}};const d=[{headerName:`Name`,children:[{field:`id.syllabic`,headerName:`Syllabic ID`,columnGroupShow:n},{field:`id.run`,headerName:`Full Run ID`,columnGroupShow:o},{field:`id.group`,headerName:`Group`,columnGroupShow:o}],marryChildren:!0},{headerName:`Timing`,children:[{field:`timing.start`,headerName:`Start`,columnGroupShow:n,...c},{field:`timing.final`,headerName:`End`,columnGroupShow:o,...c},{field:`timing.duration`,headerName:`Duration (ms)`,columnGroupShow:o}],marryChildren:!0},{headerName:`Final Metrics`,children:[]},{headerName:`Final State`,children:[{field:`final_state.samples`,headerName:`Samples`,columnGroupShow:n},{field:`final_state.batches`,headerName:`Batches`,columnGroupShow:o},{field:`final_state.epochs`,headerName:`Epochs`,columnGroupShow:o},{field:`final_state.latest_checkpoint`,headerName:`Checkpoints`,columnGroupShow:o}]},{headerName:p,children:[{field:`config`,headerName:p,columnGroupShow:n,cellRenderer:fancyCellRenderer,valueFormatter:a=&gt;{if(a.value===n||a.value===q){return r};if(typeof a.value===s){return t(a.value)};return a.value.toString()}},{field:`meta`,headerName:`Metadata`,columnGroupShow:n,cellRenderer:fancyCellRenderer,valueFormatter:a=&gt;{if(a.value===n||a.value===q){return r};if(typeof a.value===s){return t(a.value)};return a.value.toString()}}],marryChildren:!0}];const e=new Set();a.forEach(a=&gt;{Object.keys(a.final_metrics).forEach(a=&gt;e.add(a))});var f=m;e.forEach(a=&gt;{d[2].children.push({field:`final_metrics.$</span><span class="si">{a}</span><span class="s1">`,headerName:a,columnGroupShow:f===l?n:o});f+=l});b=b.concat(d);return b});var headerButtons=(async()=&gt;{let d=`info`,c=`click`;const a=document.getElementById(`projectH1`);a.innerHTML=`$</span><span class="si">{DATA_MANAGER.projectName}</span><span class="s1"> &lt;a href=&quot;https://github.com/mivanit/trnbl&quot;&gt;trnbl&lt;/a&gt; Dashboard`;const b=document.getElementById(`gridSnapCheckbox`);b.checked=LAYOUT_MANAGER.do_snap;b.addEventListener(`change`,(()=&gt;{LAYOUT_MANAGER.updateSnap(b.checked)}));document.getElementById(`saveLayoutButton`).addEventListener(c,async()=&gt;{await LAYOUT_MANAGER.saveLayout()});document.getElementById(`downloadLayoutButton`).addEventListener(c,async()=&gt;{const a=LAYOUT_MANAGER.get_local_storage_key();const b=JSON.stringify(LAYOUT_MANAGER,null,`</span><span class="se">\\\\</span><span class="s1">t`);const c=new Blob([b],{type:`application/json`});const d=URL.createObjectURL(c);const e=document.createElement(`a`);e.href=d;e.download=a+ `.json`;document.body.appendChild(e);e.click();e.remove();URL.revokeObjectURL(d)});document.getElementById(`resetLayoutButton`).addEventListener(c,async()=&gt;{const a=LAYOUT_MANAGER.get_local_storage_key();IO_MANAGER.deleteJsonLocal(a);location.reload();createNotification(`Layout resetting...`,d)});document.getElementById(`refreshButton`).addEventListener(c,async()=&gt;{await DATA_MANAGER.refreshData()});DATA_MANAGER.initAutoRefresh();document.getElementById(`resetColumnStateButton`).addEventListener(c,async()=&gt;{GRID_API.resetColumnState();createNotification(`Column state reset`,d)});document.getElementById(`toggleVisibleRowsButton`).addEventListener(c,()=&gt;toggleRowsVisibility(!0));document.getElementById(`toggleFilteredRowsButton`).addEventListener(c,()=&gt;toggleRowsVisibility(!1))});var createRunsManifestTable=(a=&gt;{let f=`visible`,e=10;const b=document.createElement(`div`);b.id=`runsManifest`;b.classList.add(`runsManifestBox`,`ag-theme-alpine`);document.getElementById(`rootContainerDiv`).appendChild(b);const c=LAYOUT_MANAGER.layout[b.id];if(c){b.style.cssText=`position: absolute; width: $</span><span class="si">{c.width}</span><span class="s1">px; height: $</span><span class="si">{c.height}</span><span class="s1">px; left: $</span><span class="si">{c.x}</span><span class="s1">px; top: $</span><span class="si">{c.y}</span><span class="s1">px; margin-bottom: 20px; $</span><span class="si">{DEFAULT_STYLE}</span><span class="s1">`};LAYOUT_MANAGER.makeElementDraggable(b);const d={columnDefs:createColumnDefs(a),rowData:a,pagination:!0,enableCellTextSelection:!0,enableBrowserTooltips:!0,rowSelection:`multiple`,pagination:!0,paginationPageSize:e,paginationPageSizeSelector:[1,2,5,e,25,50,100,500,1000],defaultColDef:{resizable:!0,filter:!0,floatingFilter:!0,menuTabs:[]},domLayout:`autoHeight`,onFirstDataRendered:(a=&gt;{adjustTableHeight(b)}),onPaginationChanged:(a=&gt;{adjustTableHeight(b)}),initialState:LAYOUT_MANAGER.grid_state};GRID_API=agGrid.createGrid(b,d);GRID_API.forEachNode(a=&gt;{const b=a.data.id.syllabic;const c=LAYOUT_MANAGER.visibilityState[b]!==!1;a.setDataValue(f,c)});GRID_API.refreshCells({force:!0,columns:[f]});GRID_API.onFilterChanged()});var init=(async()=&gt;{await DATA_MANAGER.loadManifest();LAYOUT_MANAGER=new LayoutManager(DATA_MANAGER.projectName);await LAYOUT_MANAGER.loadLayout(do_update=!1);await headerButtons();await PLOT_MANAGER.createAllPlots();await DATA_MANAGER.loadRuns();await createRunsManifestTable(DATA_MANAGER.summaryManifest);await PLOT_MANAGER.populateAllPlots();try{feather.replace();const a=document.querySelectorAll(`i[data-feather]`);a.forEach(a=&gt;{a.innerHTML=``})}catch(a){createNotification(`Feather icons not found, keeping text fallback`,`error`)}console.log(`init complete`);feather.replace();await DATA_MANAGER.refreshData()});var adjustTableHeight=(a=&gt;{const b=a.querySelector(`.ag-center-cols-viewport`).offsetHeight;const c=a.querySelector(`.ag-header`).offsetHeight;const d=a.querySelector(`.ag-paging-panel`).offsetHeight;const e=b+ c+ d+ 50;a.style.minHeight=`$</span><span class="si">{e}</span><span class="s1">px`});var blinkElement=((a,b,c)=&gt;{let e=`blink-border`;const d=document.getElementById(a);d.classList.add(e);setTimeout(()=&gt;{d.classList.remove(e)},1000)});var createNotification=((a,b=g,c=null,d=!0)=&gt;{let g=`info`,h=`.notification`,i=10;var f=(()=&gt;{const a=document.querySelectorAll(h);let b=i;a.forEach(a=&gt;{a.style.transform=`translateY($</span><span class="si">{b}</span><span class="s1">px)`;b+=a.offsetHeight+ i})});const e=`[$</span><span class="si">{b}</span><span class="s1">]: $</span><span class="si">{a}</span><span class="se">\\</span><span class="s1">n${c?c:``}`;switch(b){case g:console.log(e);if(c){console.log(c)};break;case `warning`:console.warn(e);if(c){console.warn(c)};break;case `error`:console.error(e);if(c){console.error(c)};break;default:console.log(e);if(c){console.log(c)}}if(d){const c=document.createElement(`div`);c.textContent=a;c.style.cssText=`</span><span class="se">\n\t\t\t</span><span class="s1">position: fixed;</span><span class="se">\n\t\t\t</span><span class="s1">top: 10px;</span><span class="se">\n\t\t\t</span><span class="s1">right: 10px;</span><span class="se">\n\t\t\t</span><span class="s1">padding: 10px;</span><span class="se">\n\t\t\t</span><span class="s1">border-radius: 5px;</span><span class="se">\n\t\t\t</span><span class="s1">background-color: $</span><span class="si">{NOTIFICATION_CONFIG.colors[b]}</span><span class="s1">;</span><span class="se">\n\t\t\t</span><span class="s1">border: 1px solid $</span><span class="si">{NOTIFICATION_CONFIG.border_colors[b]}</span><span class="s1">;</span><span class="se">\n\t\t\t</span><span class="s1">box-shadow: 0 2px 5px rgba(0,0,0,0.2);</span><span class="se">\n\t\t\t</span><span class="s1">transition: transform 0.3s ease-out, opacity 0.3s ease-out;</span><span class="se">\n\t\t\t</span><span class="s1">z-index: 1000;</span><span class="se">\n\t\t\t</span><span class="s1">opacity: 0;  // Start with 0 opacity for fade-in effect</span><span class="se">\n\t\t</span><span class="s1">`;c.classList.add(`notification`);const d=document.querySelector(h);if(d){document.body.insertBefore(c,d)}else{document.body.appendChild(c)};c.offsetHeight;c.style.opacity=`1`;setTimeout(f,i);setTimeout(()=&gt;{c.style.opacity=`0`;c.style.transform+=` translateX(100%)`;setTimeout(()=&gt;{c.remove();f()},300)},NOTIFICATION_CONFIG.timeout)}});var isISODate=(a=&gt;{const b=/^</span><span class="se">\\</span><span class="s1">d</span><span class="si">{4}</span><span class="s1">-</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">-</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">T</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">:</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">:</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">(.</span><span class="se">\\</span><span class="s1">d+)?(Z|[+-]</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">:</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">)?$/;return b.test(a)});var toggleRowsVisibility=(a=&gt;{let e=0,f=`visible`;const b=new Set(GRID_API.getRenderedNodes().map(a=&gt;a.data.id.syllabic));let c=[];let d;GRID_API.forEachNode(d=&gt;{const e=b.has(d.data.id.syllabic);if(a===e){c.push(d)}});if(c.length&gt;e){d=!c[e].data.visible};c.forEach(a=&gt;{a.setDataValue(f,d);LAYOUT_MANAGER.visibilityState[a.data.id.syllabic]=d});DATA_MANAGER.metricNames.forEach(a=&gt;{PLOT_MANAGER.updatePlot(a)});GRID_API.refreshCells({force:!0,columns:[f],rowNodes:c})});var fancyCellRenderer=(a=&gt;{let d=null;var b;if(a.value===undefined){return c}else{b=a.value};var c=document.createElement(`div`);c.title=b;c.textContent=b;c.style.cursor=`pointer`;if(b!==d){if(typeof b===`object`){b=JSON.stringify(b,d,4)};if(b.length&gt;50){c.title=b;c.innerHTML=feather.icons[`mouse-pointer`].toSvg()+ feather.icons[`copy`].toSvg();c.style.cssText=`font-size: 20px; display: flex; justify-content: center; align-items: center; background-color: #f4f4f4; border: 1px solid #d4d4d4; border-radius: 5px; height: 30px; width: 60px;`}};c.onclick=(()=&gt;{navigator.clipboard.writeText(b).then((()=&gt;{console.log(`Successfully copied to clipboard`)})).catch((a=&gt;{console.error(`Could not copy text to clipboard: `,a)}))});c.oncontextmenu=(()=&gt;{const c=window.open(``,`_blank`);c.document.write(`&lt;pre&gt;`+ b+ `&lt;/pre&gt;`);c.document.title=a.node.data.id.run+ ` : `+ a.colDef.headerName;c.document.close()});return c});let LAYOUT_MANAGER=null;let PLOTLY_LAYOUTS=</span><span class="si">{}</span><span class="s1">;let GRID_API=null;const DEFAULT_XUNITS=`samples`;const LAYOUT_CONFIG={&quot;plot_cont_height&quot;:300,&quot;plotcont_frac&quot;:0.4,&quot;elements_initial_offset_y&quot;:200,&quot;minimum_dims&quot;:{width:250,height:150},&quot;table_init_height&quot;:800,&quot;plot_bottom_margin_px&quot;:5,&quot;snap_interval_default&quot;:50,&quot;settings_width_px&quot;:100};const NOTIFICATION_CONFIG={colors:{</span><span class="se">\&#39;</span><span class="s1">info</span><span class="se">\&#39;</span><span class="s1">:`lightgreen`,</span><span class="se">\&#39;</span><span class="s1">warning</span><span class="se">\&#39;</span><span class="s1">:`lightyellow`,</span><span class="se">\&#39;</span><span class="s1">error</span><span class="se">\&#39;</span><span class="s1">:`lightcoral`},border_colors:{</span><span class="se">\&#39;</span><span class="s1">info</span><span class="se">\&#39;</span><span class="s1">:`green`,</span><span class="se">\&#39;</span><span class="s1">warning</span><span class="se">\&#39;</span><span class="s1">:`orange`,</span><span class="se">\&#39;</span><span class="s1">error</span><span class="se">\&#39;</span><span class="s1">:`red`},timeout:5000};const AUTO_REFRESH_CONFIG={interval:-1,select_options:[{value:-1,label:`Off`},{value:1,label:`1`},{value:5,label:`5`},{value:10,label:`10`},{value:30,label:`30`},{value:60,label:`60`},{value:100,label:`100`},{value:1000,label:`1000`}]};const DEFAULT_AUTO_REFRESH=10;const DEFAULT_STYLE={border:`1px solid black`,backgroundColor:`#f0f0f0`,borderRadius:`10px`,padding:`3px`};const PLOTLY_LAYOUT_MARGIN={l:40,r:30,b:40,t:50,pad:0};class IOManager{constructor(){this.fileTimestamps=</span><span class="si">{}</span><span class="s1">}async fetchWithNoCache(a){const b=new Headers({</span><span class="se">\&#39;</span><span class="s1">Cache-Control</span><span class="se">\&#39;</span><span class="s1">:`no-cache, no-store, must-revalidate`,</span><span class="se">\&#39;</span><span class="s1">Pragma</span><span class="se">\&#39;</span><span class="s1">:`no-cache`,</span><span class="se">\&#39;</span><span class="s1">Expires</span><span class="se">\&#39;</span><span class="s1">:`0`});return fetch(a,{method:`GET`,headers:b,credentials:`same-origin`})}async fetchJson(a,b=!1){let c=null;try{let d=c;if(b){d=await this.fetchWithNoCache(a)}else{d=await fetch(a)};if(!d.ok)throw new Error(`HTTP error! status: $</span><span class="si">{d.status}</span><span class="s1">`);return await d.json()}catch(a){createNotification(`Fetch JSON error: $</span><span class="si">{a}</span><span class="s1">`,`error`,a);return c}}async fetchJsonLines(a,b=!1,c=!1){let d=null,g=`error`,e=1,f=JSON.parse;try{let h=d;if(b){h=await this.fetchWithNoCache(a)}else{h=await fetch(a)};if(!h.ok){let a=h?h.status:`unknown`;throw new Error(`HTTP error! status: $</span><span class="si">{a}</span><span class="s1">`)};const i=await h.text();const j=i.trim().split(`</span><span class="se">\\\\</span><span class="s1">n`);const k=j.slice(0,-e).map(a=&gt;f(a));try{const a=f(j[j.length- e]);k.push(a)}catch(b){if(c){createNotification(`Invalid JSON in the last line of $</span><span class="si">{a}</span><span class="s1">: $</span><span class="si">{b}</span><span class="s1">`,g,b)}}return k}catch(a){createNotification(`Fetch JSON Lines error: $</span><span class="si">{a}</span><span class="s1">`,g,a);return d}}async saveJsonLocal(a,b){const c=JSON.stringify(b);localStorage.setItem(a,btoa(c))}async readJsonLocal(a){const b=localStorage.getItem(a);if(b){const a=atob(b);return JSON.parse(a)}else{return null}}async deleteJsonLocal(a){localStorage.removeItem(a)}async getFileModificationTime(a){let b=Date;try{const c=await fetch(a+ `?t=`+ new b().getTime(),{method:`HEAD`});if(!c.ok)throw new Error(`HTTP error! status: $</span><span class="si">{c.status}</span><span class="s1">`);return new b(c.headers.get(`Last-Modified`))}catch(a){createNotification(`Error fetching file modification time: $</span><span class="si">{a}</span><span class="s1">`,`error`,a);return null}}async fetchJsonIfModified(a){let c=null;const b=await this.getFileModificationTime(a);if(!b)return c;if(!this.fileTimestamps[a]||b&gt;this.fileTimestamps[a]){const d=await this.fetchJson(a);if(d!==c){this.fileTimestamps[a]=b};return d};return c}async fetchJsonLinesIfModified(a){let c=null;const b=await this.getFileModificationTime(a);if(!b)return c;if(!this.fileTimestamps[a]||b&gt;this.fileTimestamps[a]){const d=await this.fetchJsonLines(a);if(d!==c){this.fileTimestamps[a]=b};return d};return c}}const IO_MANAGER=new IOManager();class RunData{constructor(a){let b=null;this.path=a;this.config=b;this.meta=b;this.metrics=b;this.logs=b;this.artifacts=b}async loadData(){this.config=await IO_MANAGER.fetchJson(`$</span><span class="si">{this.path}</span><span class="s1">/config.json`);this.meta=await IO_MANAGER.fetchJson(`$</span><span class="si">{this.path}</span><span class="s1">/meta.json`);this.metrics=await IO_MANAGER.fetchJsonLines(`$</span><span class="si">{this.path}</span><span class="s1">/metrics.jsonl`);this.logs=await IO_MANAGER.fetchJsonLines(`$</span><span class="si">{this.path}</span><span class="s1">/log.jsonl`);this.artifacts=await IO_MANAGER.fetchJsonLines(`$</span><span class="si">{this.path}</span><span class="s1">/artifacts.jsonl`)}pairMetrics(a,b){let e=isNaN;const c=[];const d=[];if(this.metrics){this.metrics.forEach(f=&gt;{const g=f[a];const h=f[b];if(!e(g)&amp;&amp;!e(h)){c.push(g);d.push(h)}})};return [c,d]}static smoothData(a,b=null,c=g){let h=0,j=1,k=2,g=`SMA`,i=Math;if(a.some(isNaN)){createNotification(`Data contains NaN values`,`warning`)};if(!b){return a};const d=[];switch(c){case g:for(let c=h;c&lt;a.length;c++){const e=i.max(h,c- b+ j);const f=a.slice(e,c+ j);const g=f.reduce((a,b)=&gt;a+ b,h);const k=g/f.length;d.push(k)};break;case `EMA`:let e=a[h];const f=k/(b+ j);for(let b=h;b&lt;a.length;b++){e=f*a[b]+ (j- f)*(b&gt;h?e:a[b]);d.push(e)};break;case `Gaussian`:for(let c=h;c&lt;a.length;c++){let e=h;let f=h;for(let d=-b;d&lt;=b;d++){if(c+ d&gt;=h&amp;&amp;c+ d&lt;a.length){const g=i.exp(-(d*d)/(k*b*b));e+=a[c+ d]*g;f+=g}};const g=e/f;d.push(g)};break;default:createNotification(`Invalid smoothing method: $</span><span class="si">{c}</span><span class="s1">`,`error`);return []}return d}}class DataManager{constructor(){let a=null,b=Set;this.manifest=a;this.allRuns=</span><span class="si">{}</span><span class="s1">;this.metricNames=new b();this.projectName=a;this.summaryManifest=a;this.lastRefreshTime=a;this.updatedRuns=new b()}async loadManifest(){let b=`error`;this.manifest=await IO_MANAGER.fetchJsonLines(`runs.jsonl`,!0);if(!this.manifest){createNotification(`Failed to load manifest`,b)};const a=new Set();for(const b of this.manifest){a.add(b.project);b.metric_names.forEach(a=&gt;{this.metricNames.add(a)})};if(a.size===1){this.projectName=a.values().next().value}else{createNotification(`Project names are not consistent across runs: $</span><span class="si">{a}</span><span class="s1">`,b)}}async loadRuns(){if(!this.manifest){this.loadManifest()};for(const a of this.manifest){const b=new RunData(`runs/$</span><span class="si">{a.run_id}</span><span class="s1">`);await b.loadData();this.allRuns[a.run_id]=b};this.updateSummaryManifest()}updateSummaryManifest(){let b=0,d=null,c=1,f=Date,a=Object,e=undefined;try{if(a.keys(this.allRuns).length===b){throw `No runs found`}}catch(a){createNotification(`Could not find any runs to update summary manifest: $</span><span class="si">{a}</span><span class="s1">`,`error`)}this.summaryManifest=a.values(this.allRuns).map(a=&gt;{const g=a.logs.length&gt;b?a.logs[a.logs.length- c].timestamp:d;let h=</span><span class="si">{}</span><span class="s1">;for(let d=a.metrics.length- c;d&gt;=b;d--){this.metricNames.forEach(b=&gt;{if(a.metrics[d][b]!==e&amp;&amp;h[b]===e){h[b]=a.metrics[d][b]}})};const i=a.metrics[a.metrics.length- c];let j=</span><span class="si">{}</span><span class="s1">;for(let a of [`samples`,`batches`,`epochs`,`latest_checkpoint`]){if(i){j[a]=i[a]}else{j[a]=d}};return {id:{syllabic:a.meta.syllabic_id,run:a.meta.run_id,group:a.meta.group},timing:{start:a.meta.run_init_timestamp,final:g,duration:new f(g)- new f(a.meta.run_init_timestamp)},final_metrics:h,final_state:j,config:a.config,meta:a.meta}})}async refreshData(a=!0){let d=`info`,e=JSON.stringify;if(a){createNotification(`Checking for data updates...`,d)};let b=!1;this.updatedRuns.clear();const c=await IO_MANAGER.fetchJsonLines(`runs.jsonl`,!0);if(e(c)!==e(this.manifest)){this.manifest=c;console.log(this.manifest);b=!0;createNotification(`Manifest file updated`,d)};for(const a of this.manifest){const c=`runs/$</span><span class="si">{a.run_id}</span><span class="s1">`;const d=await IO_MANAGER.fetchJsonIfModified(`$</span><span class="si">{c}</span><span class="s1">/config.json`);const e=await IO_MANAGER.fetchJsonIfModified(`$</span><span class="si">{c}</span><span class="s1">/meta.json`);const f=await IO_MANAGER.fetchJsonLinesIfModified(`$</span><span class="si">{c}</span><span class="s1">/metrics.jsonl`);const g=await IO_MANAGER.fetchJsonLinesIfModified(`$</span><span class="si">{c}</span><span class="s1">/log.jsonl`);const h=await IO_MANAGER.fetchJsonLinesIfModified(`$</span><span class="si">{c}</span><span class="s1">/artifacts.jsonl`);if(d||e||f||g||h){const i=this.allRuns[a.run_id]||new RunData(c);if(d)i.config=d;if(e)i.meta=e;if(f)i.metrics=f;if(g)i.logs=g;if(h)i.artifacts=h;this.allRuns[a.run_id]=i;b=!0;this.updatedRuns.add(a.run_id);console.log(`Updated data for run $</span><span class="si">{a.run_id}</span><span class="s1">`)}};if(b){this.metricNames.clear();for(const a of this.manifest){a.metric_names.forEach(a=&gt;{this.metricNames.add(a)})};this.updateSummaryManifest();this.lastRefreshTime=new Date();const b=DATA_MANAGER.getUpdatedRunsInfo();await PLOT_MANAGER.populateAllPlots();GRID_API.setGridOption(`rowData`,DATA_MANAGER.summaryManifest);GRID_API.refreshCells({force:!0});if(b.count&gt;0){createNotification(`Data refreshed successfully. $</span><span class="si">{b.count}</span><span class="s1"> run(s) updated`+ (b.count&lt;3?`: ${b.runs.join(`, `)}`:``),d,b,a)}else{createNotification(`Manifest updated, but no individual runs were changed`,d,b,a)}}else{createNotification(`No new data updates found`,d,null,a)};return b}initAutoRefresh(){const a=document.getElementById(`autoRefreshSelect`);AUTO_REFRESH_CONFIG.select_options.forEach(b=&gt;{const c=document.createElement(`option`);c.value=b.value;c.textContent=b.label;if(b.value===AUTO_REFRESH_CONFIG.interval){c.selected=!0};a.appendChild(c)});a.addEventListener(`change`,()=&gt;{this.setAutoRefresh(parseFloat(a.value))});this.setAutoRefresh(AUTO_REFRESH_CONFIG.interval)}setAutoRefresh(a){let b=`info`;if(this.autoRefreshInterval){clearInterval(this.autoRefreshInterval)};if(a&gt;0){this.autoRefreshInterval=setInterval(()=&gt;{this.refreshData(!1).then(()=&gt;{blinkElement(`autoRefreshButton`)})},a*1000);createNotification(`Auto refresh set to $</span><span class="si">{a}</span><span class="s1"> seconds`,b)}else{createNotification(`Auto refresh turned off`,b)}}getUpdatedRunsInfo(){return {count:this.updatedRuns.size,runs:Array.from(this.updatedRuns)}}}const DATA_MANAGER=new DataManager();class LayoutManager{constructor(a){this.projectName=a;this.layout=</span><span class="si">{}</span><span class="s1">;this.do_snap=!0;this.snapInterval=LAYOUT_CONFIG.snap_interval_default;this.plot_configs=</span><span class="si">{}</span><span class="s1">;this.grid_state=null;this.visibilityState=</span><span class="si">{}</span><span class="s1">;this.init_y=this.round_to_snap_interval(LAYOUT_CONFIG.elements_initial_offset_y);this.default_plot_cont_height=this.round_to_snap_interval(LAYOUT_CONFIG.plot_cont_height);const b=window.innerWidth;this.default_plot_cont_width=this.round_to_snap_interval(b*LAYOUT_CONFIG.plotcont_frac);this.table_width=this.round_to_snap_interval(b- (this.default_plot_cont_width+ this.snapInterval))}round_to_snap_interval(a){return Math.ceil(a/this.snapInterval)*this.snapInterval}get_default_layout(a,b=!0){let f=0;const c=Array.from(a);var d=</span><span class="si">{}</span><span class="s1">;const e=this.round_to_snap_interval(this.default_plot_cont_height*1.1);for(let a=f;a&lt;c.length;a++){const b=c[a];d[`plotContainer-$</span><span class="si">{b}</span><span class="s1">`]={x:f,y:this.init_y+ a*e,height:this.default_plot_cont_height,width:this.default_plot_cont_width}};d[`runsManifest`]={x:this.default_plot_cont_width+ LAYOUT_CONFIG.snap_interval_default,y:this.init_y,height:LAYOUT_CONFIG.table_init_height,width:this.table_width};if(b){this.layout=d};return d}async getDefaultPlotConfig(){let a=`linear`;return {size:{width:this.default_plot_cont_width- LAYOUT_CONFIG.settings_width_px,height:this.default_plot_cont_height},axisScales:{x:a,y:a},smoothing_method:`SMA`,smoothing_span:null,xUnits:DEFAULT_XUNITS}}async getPlotConfig(a){if(!(a in this.plot_configs)){this.plot_configs[a]=await this.getDefaultPlotConfig()};return this.plot_configs[a]}makeElementDraggable(a){let d=`draggable`;const b=a.id;let c=this.getInitialPosition(a);if(!a.classList.contains(d)){a.classList.add(d)};this.initializeDragInteraction(a,c);this.initializeResizeInteraction(a,c);this.updateElementLayout(a,c.x,c.y,!0)}getInitialPosition(a){let d=0,c=parseFloat;const b=a.id;if(this.layout[b]){return {x:this.layout[b].x,y:this.layout[b].y}}else{return {x:c(a.getAttribute(`data-x`))||d,y:c(a.getAttribute(`data-y`))||d}}}initializeDragInteraction(a,b){let d=1,c=0;interact(a).draggable({ignoreFrom:`.draglayer, .ag-header, .ag-center-cols-container, .no-drag, .legend, .bg, .scrollbox`,modifiers:[interact.modifiers.snap({targets:[interact.snappers.grid({x:this.snapInterval,y:this.snapInterval})],range:Infinity,relativePoints:[{x:c,y:c}]}),interact.modifiers.restrict({restriction:`parent`,elementRect:{top:c,left:c,bottom:d,right:d},endOnly:!0})],inertia:!0}).on(`dragmove`,a=&gt;{b.x+=a.dx;b.y+=a.dy;this.updateElementLayout(a.target,b.x,b.y,!0)})}initializeResizeInteraction(a,b){interact(a).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},modifiers:[interact.modifiers.snapSize({targets:[interact.snappers.grid({width:this.snapInterval,height:this.snapInterval})],range:Infinity}),interact.modifiers.restrictSize({min:LAYOUT_CONFIG.minimum_dims})],inertia:!0}).on(`resizemove`,a=&gt;{const {width:c,height:d}=a.rect;b.x+=a.deltaRect.left;b.y+=a.deltaRect.top;const e=a.target;this.updateElementLayout(e,b.x,b.y,!1,c,d);const f=e.classList.contains(`plotContainer`);if(f){const b=e.querySelector(`.plotSettings`);const c=e.querySelector(`.plotDiv`);var g=a.rect.width- LAYOUT_CONFIG.settings_width_px;b.style.width=g;c.style.width=`$</span><span class="si">{g}</span><span class="s1">px`;c.style.height=`$</span><span class="si">{a.rect.height}</span><span class="s1">px`;const d=c.id;Plotly.relayout(d,{width:g,height:a.rect.height- LAYOUT_CONFIG.plot_bottom_margin_px});const f=d.split(`-`)[1];this.plot_configs[f].size={width:g,height:a.rect.height};PLOTLY_LAYOUTS[f].width=g;PLOTLY_LAYOUTS[f].height=a.rect.height- LAYOUT_CONFIG.plot_bottom_margin_px}})}updateElementLayout(a,b,c,d=!0,e=g,f=g){let g=null;if(d){a.style.left=`$</span><span class="si">{b}</span><span class="s1">px`;a.style.top=`$</span><span class="si">{c}</span><span class="s1">px`};if(e&amp;&amp;f){a.style.width=`$</span><span class="si">{e}</span><span class="s1">px`;a.style.height=`$</span><span class="si">{f}</span><span class="s1">px`}else{e=a.offsetWidth;f=a.offsetHeight};this.layout[a.id]={x:b,y:c,width:e,height:f}}updateAllLayouts(){for(const a in this.layout){const b=this.layout[a];const c=document.getElementById(a);const d=this.getInitialPosition(c);this.updateElementLayout(c,b.x,b.y,!0,b.width,b.height)}}get_local_storage_key(){return `$</span><span class="si">{this.projectName}</span><span class="s1">_layout`}async saveLayout(){let c=JSON.stringify;this.updateGridState();const a=this.get_local_storage_key();IO_MANAGER.saveJsonLocal(a,this);const b=await IO_MANAGER.readJsonLocal(a);if(b&amp;&amp;c(b)==c(this)){console.log(`Layout saved:`,b);createNotification(`Layout saved`,`info`)}else{console.error(`Layout not saved:`,this,b);createNotification(`Layout not saved`,`error`)}}async loadLayout(a=!0){const b=this.get_local_storage_key();const c=await IO_MANAGER.readJsonLocal(b);if(c){this.projectName=c.projectName;this.layout=c.layout;this.do_snap=c.do_snap;this.snapInterval=c.snapInterval;this.plot_configs=c.plot_configs;this.grid_state=c.grid_state;this.visibilityState=c.visibilityState}else{this.layout=this.get_default_layout(DATA_MANAGER.metricNames)};console.log(`Layout loaded:`,this);if(a){this.updateAllLayouts()}}async updateSnap(a=!0,b=LAYOUT_CONFIG.snap_interval_default){this.do_snap=a;if(!a){b=1};this.snapInterval=b;console.log(`Snap settings updated:`,this.do_snap,this.snapInterval);for(const a in this.layout){const b=document.getElementById(a);let c=this.getInitialPosition(b);this.initializeDragInteraction(b,c);this.initializeResizeInteraction(b,c)}}updateGridState(){this.grid_state=GRID_API.getState()}}class PlotManager{constructor(){this.plots=</span><span class="si">{}</span><span class="s1">}async createPlot(a){let i=JSON;const b=`plotContainer-$</span><span class="si">{a}</span><span class="s1">`;const c=`plot-$</span><span class="si">{a}</span><span class="s1">`;const d=`plotSettings-$</span><span class="si">{a}</span><span class="s1">`;const e=await LAYOUT_MANAGER.getPlotConfig(a);const f=LAYOUT_MANAGER.layout[b];const g=`</span><span class="se">\n\t\t\t</span><span class="s1">&lt;div</span><span class="se">\n\t\t\t\t</span><span class="s1">id=&quot;$</span><span class="si">{b}</span><span class="s1">&quot;</span><span class="se">\n\t\t\t\t</span><span class="s1">class=&quot;plotContainer&quot; </span><span class="se">\n\t\t\t\t</span><span class="s1">style=&quot;margin-bottom: 10px; display: flex; flex-direction: row; position: absolute; width: $</span><span class="si">{f.width}</span><span class="s1">px; height: $</span><span class="si">{f.height}</span><span class="s1">px; left: $</span><span class="si">{f.x}</span><span class="s1">px; top: $</span><span class="si">{f.y}</span><span class="s1">px; $</span><span class="si">{DEFAULT_STYLE}</span><span class="s1">&quot;</span><span class="se">\n\t\t\t</span><span class="s1">&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;div </span><span class="se">\n\t\t\t\t\t</span><span class="s1">id=&quot;$</span><span class="si">{c}</span><span class="s1">&quot;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">class=&quot;plotDiv&quot; </span><span class="se">\n\t\t\t\t\t</span><span class="s1">style=&quot;width: ${f.width- LAYOUT_CONFIG.settings_width_px}px; height: ${f.height- LAYOUT_CONFIG.plot_bottom_margin_px}px;&quot;</span><span class="se">\n\t\t\t\t</span><span class="s1">&gt;&lt;/div&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;div </span><span class="se">\n\t\t\t\t\t</span><span class="s1">id=&quot;$</span><span class="si">{d}</span><span class="s1">&quot;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">class=&quot;plotSettings&quot; </span><span class="se">\n\t\t\t\t\t</span><span class="s1">style=&quot;width: $</span><span class="si">{LAYOUT_CONFIG.settings_width_px}</span><span class="s1">; flex-shrink: 0; flex-grow: 0;&quot;</span><span class="se">\n\t\t\t\t</span><span class="s1">&gt;&lt;/div&gt;</span><span class="se">\n\t\t\t</span><span class="s1">&lt;/div&gt;</span><span class="se">\n\t\t</span><span class="s1">`;document.getElementById(`rootContainerDiv`).insertAdjacentHTML(`beforeend`,g);this.plots[a]={plotID:c,containerID:b,settingsID:d};const h={title:`$</span><span class="si">{a}</span><span class="s1"> over $</span><span class="si">{e.xUnits}</span><span class="s1">`,autosize:!0,xaxis:{title:e.xUnits,type:e.axisScales.x,showgrid:!0},yaxis:{title:a,type:e.axisScales.y,showgrid:!0},margin:PLOTLY_LAYOUT_MARGIN,width:f.width- LAYOUT_CONFIG.settings_width_px,height:f.height- LAYOUT_CONFIG.plot_bottom_margin_px};PLOTLY_LAYOUTS[a]=h;Plotly.newPlot(c,[],i.parse(i.stringify(h)));this.createAxisToggles(a);this.createSmoothingInput(a);LAYOUT_MANAGER.makeElementDraggable(document.getElementById(b))}async createAllPlots(a=50,b=150){const c=DATA_MANAGER.metricNames;let d=0;c.forEach(a=&gt;{d+=1;console.log(`creating plot $</span><span class="si">{d}</span><span class="s1"> for $</span><span class="si">{a}</span><span class="s1">`);this.createPlot(a)})}async updatePlot(a){let e=JSON;const b=this.plots[a];const c=await LAYOUT_MANAGER.getPlotConfig(a);if(!b){console.error(`Plot for metric $</span><span class="si">{a}</span><span class="s1"> not found.`);return};var d=[];for(const b in DATA_MANAGER.allRuns){const e=DATA_MANAGER.allRuns[b];const f=e.meta.syllabic_id;const [g,h]=e.pairMetrics(DEFAULT_XUNITS,a);let i=RunData.smoothData(h,c.smoothing_span,c.smoothing_method);const j={x:g,y:i,mode:`lines`,line:c.smoothing_span?{shape:`spline`}:</span><span class="si">{}</span><span class="s1">,name:f,visible:LAYOUT_MANAGER.visibilityState[f]!==!1?!0:`legendonly`};d.push(j)};PLOTLY_LAYOUTS[a].xaxis.type=c.axisScales.x;PLOTLY_LAYOUTS[a].yaxis.type=c.axisScales.y;PLOTLY_LAYOUTS[a].uirevision=a;Plotly.react(b.plotID,d,e.parse(e.stringify(PLOTLY_LAYOUTS[a])))}updateTraceVisibility(a,b){LAYOUT_MANAGER.visibilityState[a]=b;for(const c of DATA_MANAGER.metricNames){const d=this.plots[c];if(d){Plotly.restyle(d.plotID,{visible:b?!0:`legendonly`},[this.getTraceIndex(d.plotID,a)])}}}getTraceIndex(a,b){const c=document.getElementById(a);const d=c.data;const e=d.findIndex(a=&gt;a.name===b);if(e&lt;0){console.error(`Trace for run $</span><span class="si">{b}</span><span class="s1"> not found in plot $</span><span class="si">{a}</span><span class="s1">`)};return e}updateAllVisibility(){for(const a of DATA_MANAGER.metricNames){this.updatePlot(a)}}async populateAllPlots(){for(const a of DATA_MANAGER.metricNames){this.updatePlot(a)}}updateAxisScale(a,b,c){const d=this.plots[a];if(!d){console.error(`Plot for metric $</span><span class="si">{a}</span><span class="s1"> not found.`);return};const e=LAYOUT_MANAGER.plot_configs[a];e.axisScales[b]=c;Plotly.relayout(d.plotID,{[`$</span><span class="si">{b}</span><span class="s1">axis`]:</span><span class="si">{type:c}</span><span class="s1">,uirevision:a})}createAxisToggles(a){let e=`log`;const b=this.plots[a].settingsID;const c=this.plots[a].plotID;const d=document.getElementById(b);[`x`,`y`].forEach(b=&gt;{const f=`$</span><span class="si">{c}</span><span class="s1">-$</span><span class="si">{b}</span><span class="s1">Toggle`;const g=`</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;div class=&quot;axis-toggle-container&quot; style=&quot;display: block;&quot;&gt;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">&lt;label for=&quot;$</span><span class="si">{f}</span><span class="s1">&quot; style=&quot;display: block;&quot;&gt;${b.toUpperCase()} Scale&lt;/label&gt;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">&lt;div style=&quot;display: flex; align-items: center;&quot;&gt;</span><span class="se">\n\t\t\t\t\t\t</span><span class="s1">&lt;i data-feather=&quot;arrow-up-right&quot;&gt;lin&lt;/i&gt;</span><span class="se">\n\t\t\t\t\t\t</span><span class="s1">&lt;label class=&quot;switch&quot;&gt;</span><span class="se">\n\t\t\t\t\t\t\t</span><span class="s1">&lt;input type=&quot;checkbox&quot; id=&quot;$</span><span class="si">{f}</span><span class="s1">&quot;&gt;</span><span class="se">\n\t\t\t\t\t\t\t</span><span class="s1">&lt;span class=&quot;slider round&quot;&gt;&lt;/span&gt;</span><span class="se">\n\t\t\t\t\t\t</span><span class="s1">&lt;/label&gt;</span><span class="se">\n\t\t\t\t\t\t</span><span class="s1">&lt;i data-feather=&quot;corner-right-up&quot;&gt;log&lt;/i&gt;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">&lt;/div&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;/div&gt;</span><span class="se">\n\t\t\t</span><span class="s1">`;const h=document.createElement(`div`);h.innerHTML=g.trim();d.appendChild(h);const i=document.getElementById(f);i.checked=LAYOUT_MANAGER.plot_configs[a].axisScales[b]===e;i.onchange=()=&gt;{const c=i.checked?e:`linear`;this.updateAxisScale(a,b,c)}})}async createSmoothingInput(a){const b=this.plots[a].plotID;const c=this.plots[a].settingsID;const d=[`SMA`,`EMA`,`Gaussian`];const e=`</span><span class="se">\n\t\t\t</span><span class="s1">&lt;div class=&quot;smoothing-input-container no-drag&quot; style=&quot;display: block; margin-top: 10px; border: 1px solid grey; border-radius: 3px;&quot;&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;label for=&quot;smoothingInput-$</span><span class="si">{b}</span><span class="s1">&quot; style=&quot;font-weight: bold;&quot;&gt;Smooth:&lt;/label&gt;&lt;br&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;label for=&quot;smoothingMethodSelect-$</span><span class="si">{b}</span><span class="s1">&quot;&gt;Method&lt;/label&gt;&lt;br&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;select class=&quot;no-drag&quot; id=&quot;smoothingMethodSelect-$</span><span class="si">{b}</span><span class="s1">&quot; style=&quot;width: 6em;&quot;&gt;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">${d.map(a=&gt;`&lt;option value=&quot;$</span><span class="si">{a}</span><span class="s1">&quot;&gt;$</span><span class="si">{a}</span><span class="s1">&lt;/option&gt;`).join(``)}</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;/select&gt;&lt;br&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;label for=&quot;smoothingInput-$</span><span class="si">{b}</span><span class="s1">&quot;&gt;Span&lt;/label&gt;&lt;br&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;input class=&quot;no-drag&quot; type=&quot;number&quot; min=&quot;0&quot; max=&quot;1000&quot; value=&quot;0&quot; id=&quot;smoothingInput-$</span><span class="si">{b}</span><span class="s1">&quot; style=&quot;width: 4.2em;&quot;&gt;</span><span class="se">\n\t\t\t</span><span class="s1">&lt;/div&gt;</span><span class="se">\n\t\t</span><span class="s1">`;const f=document.createElement(`div`);f.innerHTML=e.trim();const g=document.getElementById(c);g.appendChild(f);const h=document.getElementById(`smoothingInput-$</span><span class="si">{b}</span><span class="s1">`);const i=document.getElementById(`smoothingMethodSelect-$</span><span class="si">{b}</span><span class="s1">`);h.value=LAYOUT_MANAGER.plot_configs[a].smoothing_span;i.value=LAYOUT_MANAGER.plot_configs[a].smoothing_method;h.onchange=()=&gt;{LAYOUT_MANAGER.plot_configs[a].smoothing_span=parseInt(h.value);this.updatePlot(a)};i.onchange=()=&gt;{LAYOUT_MANAGER.plot_configs[a].smoothing_method=i.value;this.updatePlot(a)}}}let PLOT_MANAGER=new PlotManager()&lt;/script&gt;&lt;body&gt;&lt;header id=mainHeader&gt;&lt;h1 id=projectH1&gt;&lt;a href=https://github.com/mivanit/trnbl&gt;trnbl&lt;/a&gt; Dashboard&lt;/h1&gt;&lt;button class=headerButton id=refreshButton&gt;&lt;i data-feather=refresh-cw&gt;&lt;/i&gt;&lt;i data-feather=bar-chart-2&gt;&lt;/i&gt; Refresh Data&lt;/button&gt;&lt;div class=headerButton id=autoRefreshButton&gt;&lt;label for=autoRefreshSelect&gt;&lt;i data-feather=refresh-cw&gt;&lt;/i&gt;&lt;i data-feather=clock&gt;&lt;/i&gt; Auto Refresh (s):&lt;/label&gt;&lt;select id=autoRefreshSelect&gt;&lt;/select&gt;&lt;/div&gt;&lt;button class=headerButton id=toggleVisibleRowsButton&gt;&lt;i data-feather=eye&gt;&lt;/i&gt;&lt;i data-feather=toggle-right&gt;&lt;/i&gt; Toggle Visible Rows&lt;/button&gt;&lt;button class=headerButton id=toggleFilteredRowsButton&gt;&lt;i data-feather=eye-off&gt;&lt;/i&gt;&lt;i data-feather=toggle-left&gt;&lt;/i&gt; Toggle Filtered Rows&lt;/button&gt;&lt;br&gt;&lt;br&gt;&lt;button class=headerButton id=saveLayoutButton&gt;&lt;i data-feather=save&gt;&lt;/i&gt;&lt;i data-feather=layout&gt;&lt;/i&gt; Save Current Layout&lt;/button&gt;&lt;button class=headerButton id=resetLayoutButton&gt;&lt;i data-feather=refresh-ccw&gt;&lt;/i&gt;&lt;i data-feather=layout&gt;&lt;/i&gt; Reset Layout&lt;/button&gt;&lt;button class=headerButton id=downloadLayoutButton&gt;&lt;i data-feather=download&gt;&lt;/i&gt;&lt;i data-feather=layout&gt;&lt;/i&gt; Download Current Layout&lt;/button&gt;&lt;div class=headerButton&gt;&lt;input id=gridSnapCheckbox type=checkbox&gt;&lt;label for=gridSnapCheckbox&gt;&lt;i data-feather=grid&gt;&lt;/i&gt; Grid Snap&lt;/label&gt;&lt;/div&gt;&lt;button class=headerButton id=resetColumnStateButton&gt;&lt;i data-feather=refresh-ccw&gt;&lt;/i&gt;&lt;i data-feather=columns&gt;&lt;/i&gt; Reset Column Sizes&lt;/button&gt;&lt;hr&gt;&lt;/header&gt;&lt;div class=rootContainer id=rootContainerDiv&gt;&lt;div id=invisHbar style=width:100em;height:100em&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt;document.addEventListener(`DOMContentLoaded`,init)&lt;/script&gt;&#39;</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">5</span></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">6</span></a>	<span class="nb">print</span><span class="p">(</span><span class="n">get_html_frontend</span><span class="p">())</span>
</span></pre></div>


                <br/>
            </section>
                <section id="get_html_frontend">
                            <input id="get_html_frontend-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_html_frontend</span><span class="signature pdoc-code condensed">(<span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <div class="source-button-container">
            <label class="pdoc-button view-source-button" for="get_html_frontend-view-source"><span>View Source</span></label>
            <div class="github-button-wrapper">
                <a class="pdoc-button github-link-button" href="https://github.com/mivanit/trnbl/blob/0.1.1/loggers/local/html_frontend.py#L1-L2" target="_blank">
                    <span>View on GitHub</span>
                </a>
            </div>
        </div>

    </div>
    <a class="headerlink" href="#get_html_frontend"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="get_html_frontend-2"><a href="#get_html_frontend-2"><span class="linenos">2</span></a><span class="k">def</span><span class="w"> </span><span class="nf">get_html_frontend</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="get_html_frontend-3"><a href="#get_html_frontend-3"><span class="linenos">3</span></a>	<span class="k">return</span> <span class="s1">&#39;&lt;!-- trnbl v0.1.0 https://miv.name/trnbl --&gt;</span><span class="se">\n</span><span class="s1">&lt;!doctypehtml&gt;&lt;title&gt;trnbl dashboard&lt;/title&gt;&lt;script src=https://cdn.plot.ly/plotly-latest.min.js&gt;&lt;/script&gt;&lt;script src=https://unpkg.com/interactjs/dist/interact.min.js&gt;&lt;/script&gt;&lt;script src=https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js&gt;&lt;/script&gt;&lt;script src=https://unpkg.com/feather-icons&gt;&lt;/script&gt;&lt;style&gt;*,svg{font-family:Roboto-mono,monospace}.draggable:hover{z-index:999;border:1px solid #00f;transition-delay:.5s}.draggable{transition:z-index .5s}.draggable:not(:hover){transition-delay:.5s}.ag-icon{font-family:agGridAlpine!important}option{font-size:2em!important}.rootContainer</span><span class="si">{height:100%}</span><span class="s1">.plotContainer,.runsManifestBox{background-color:#f0f0f0;border:1px solid #000;border-radius:10px;padding:3px}.plotSettings{margin-left:2px}.headerButton{cursor:pointer;color:#000;text-align:center;background-color:#d8d8d8;border:1px solid #3c3c3c;border-radius:5px;height:35px;padding:0 10px;font-size:16px;line-height:30px;transition:background-color .1s,border-color .1s,color .1s;display:inline-block}.headerButton:hover,.headerButton:focus{color:#000;background-color:#797979;border-color:#213244}.headerButton svg{vertical-align:middle}hr{border:none;border-top:1px solid #ccc;margin-top:10px}.axis-toggle-container{margin-top:10px}.switch{width:3em;height:1.5em;display:inline-block;position:relative}.switch input{opacity:0;width:0;height:0}.slider{cursor:pointer;background-color:#ccc;-webkit-transition:all .4s;transition:all .4s;position:absolute;inset:0}.slider:before{content:&quot;&quot;;background-color:#fff;width:1em;height:1em;-webkit-transition:all .4s;transition:all .4s;position:absolute;bottom:4px;left:4px}input:checked+.slider{background-color:#2196f3}input:focus+.slider{box-shadow:0 0 1px #2196f3}input:checked+.slider:before{-webkit-transform:translate(1.5em);-ms-transform:translate(1.5em);transform:translate(1.5em)}.slider.round{border-radius:34px}.slider.round:before{border-radius:50%}@keyframes blinkButton{0%{background-color:#d8d8d8}50%{background-color:#b5d8c9}to{background-color:#d8d8d8}}.blink-border{animation:.5s ease-in-out blinkButton}&lt;/style&gt;&lt;link href=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAMUExURRwfKv////5MRBel/pJJVGsAAAAJcEhZcwAADsIAAA7CARUoSoAAAAFdSURBVDjLnZNNTsMwEEbHsSJBNmzaO0BO4Ta7riLR7llWPUUQFwnqxtzCYLFhw1V6BL7xT+zEFRK4alW/zPdstTP0v3WYlt/XCfS+oI+ltSsR+xReK8YqAcHF69zP1Su8q4FImrDZC0XNSHR3CeU9QKsDqNkDoFuOIIQTGFRjM0CDGgZHobAdoQFAtTgJhYCGBhEGu2cFZcuaamCwfd2O0jTQ4HQG6m03SFNBE8HDyd9Sh4i6PUrLd4DESbv3Jw8gCUB5AEkOrIFkASDxoLMMrIEkA3hBMgFrP14guUnANGdI7heg0bOINVUE7gwc3EaAp9bFIvg6e0AFoEVkAiz1JDv2N/D5iO/uwxoGh3xtroEUwU8yl2bAX6QA4RQlOuP6x35fKAL+b2eAG07Gm3rAkSDtXYQRmix0IXGXRkAeuC6Vpg6tneYj9Pu0VtfGoxigYsSKISzHtBjkvy2iH6CFB7azg+vPAAAAAElFTkSuQmCC rel=icon&gt;&lt;script&gt;var createColumnDefs=(a=&gt;{let m=0,n=null,g=`div`,r=``,s=`object`,l=1,h=`center`,o=`open`,i=`eye`,p=`Config`,j=`eye-off`,k=Date,t=JSON.stringify,q=undefined;var b=[{headerName:`View/Hide`,field:`visible`,width:100,cellRenderer:a=&gt;{const b=document.createElement(g);b.className=`ag-cell-wrapper`;b.style.display=`flex`;b.style.alignItems=h;b.style.justifyContent=h;const c=document.createElement(`input`);c.type=`checkbox`;c.checked=a.value!==!1;c.style.marginRight=`5px`;const d=document.createElement(g);d.innerHTML=feather.icons[c.checked?i:j].toSvg();d.style.pointerEvents=`none`;b.appendChild(c);b.appendChild(d);const e=b=&gt;{a.setValue(b);c.checked=b;d.innerHTML=feather.icons[b?i:j].toSvg();PLOT_MANAGER.updateTraceVisibility(a.data.id.syllabic,b)};c.addEventListener(`change`,()=&gt;e(c.checked));b.addEventListener(`click`,a=&gt;{if(a.target!==c){e(!c.checked)}});return b}}];const c={filter:`agDateColumnFilter`,filterParams:{comparator:((a,b)=&gt;{const c=new k(b);const d=new k(a);if(c&lt;d){return -l}else if(c&gt;d){return l};return m}),browserDatePicker:!1,inRangeInclusive:!0}};const d=[{headerName:`Name`,children:[{field:`id.syllabic`,headerName:`Syllabic ID`,columnGroupShow:n},{field:`id.run`,headerName:`Full Run ID`,columnGroupShow:o},{field:`id.group`,headerName:`Group`,columnGroupShow:o}],marryChildren:!0},{headerName:`Timing`,children:[{field:`timing.start`,headerName:`Start`,columnGroupShow:n,...c},{field:`timing.final`,headerName:`End`,columnGroupShow:o,...c},{field:`timing.duration`,headerName:`Duration (ms)`,columnGroupShow:o}],marryChildren:!0},{headerName:`Final Metrics`,children:[]},{headerName:`Final State`,children:[{field:`final_state.samples`,headerName:`Samples`,columnGroupShow:n},{field:`final_state.batches`,headerName:`Batches`,columnGroupShow:o},{field:`final_state.epochs`,headerName:`Epochs`,columnGroupShow:o},{field:`final_state.latest_checkpoint`,headerName:`Checkpoints`,columnGroupShow:o}]},{headerName:p,children:[{field:`config`,headerName:p,columnGroupShow:n,cellRenderer:fancyCellRenderer,valueFormatter:a=&gt;{if(a.value===n||a.value===q){return r};if(typeof a.value===s){return t(a.value)};return a.value.toString()}},{field:`meta`,headerName:`Metadata`,columnGroupShow:n,cellRenderer:fancyCellRenderer,valueFormatter:a=&gt;{if(a.value===n||a.value===q){return r};if(typeof a.value===s){return t(a.value)};return a.value.toString()}}],marryChildren:!0}];const e=new Set();a.forEach(a=&gt;{Object.keys(a.final_metrics).forEach(a=&gt;e.add(a))});var f=m;e.forEach(a=&gt;{d[2].children.push({field:`final_metrics.$</span><span class="si">{a}</span><span class="s1">`,headerName:a,columnGroupShow:f===l?n:o});f+=l});b=b.concat(d);return b});var headerButtons=(async()=&gt;{let d=`info`,c=`click`;const a=document.getElementById(`projectH1`);a.innerHTML=`$</span><span class="si">{DATA_MANAGER.projectName}</span><span class="s1"> &lt;a href=&quot;https://github.com/mivanit/trnbl&quot;&gt;trnbl&lt;/a&gt; Dashboard`;const b=document.getElementById(`gridSnapCheckbox`);b.checked=LAYOUT_MANAGER.do_snap;b.addEventListener(`change`,(()=&gt;{LAYOUT_MANAGER.updateSnap(b.checked)}));document.getElementById(`saveLayoutButton`).addEventListener(c,async()=&gt;{await LAYOUT_MANAGER.saveLayout()});document.getElementById(`downloadLayoutButton`).addEventListener(c,async()=&gt;{const a=LAYOUT_MANAGER.get_local_storage_key();const b=JSON.stringify(LAYOUT_MANAGER,null,`</span><span class="se">\\\\</span><span class="s1">t`);const c=new Blob([b],{type:`application/json`});const d=URL.createObjectURL(c);const e=document.createElement(`a`);e.href=d;e.download=a+ `.json`;document.body.appendChild(e);e.click();e.remove();URL.revokeObjectURL(d)});document.getElementById(`resetLayoutButton`).addEventListener(c,async()=&gt;{const a=LAYOUT_MANAGER.get_local_storage_key();IO_MANAGER.deleteJsonLocal(a);location.reload();createNotification(`Layout resetting...`,d)});document.getElementById(`refreshButton`).addEventListener(c,async()=&gt;{await DATA_MANAGER.refreshData()});DATA_MANAGER.initAutoRefresh();document.getElementById(`resetColumnStateButton`).addEventListener(c,async()=&gt;{GRID_API.resetColumnState();createNotification(`Column state reset`,d)});document.getElementById(`toggleVisibleRowsButton`).addEventListener(c,()=&gt;toggleRowsVisibility(!0));document.getElementById(`toggleFilteredRowsButton`).addEventListener(c,()=&gt;toggleRowsVisibility(!1))});var createRunsManifestTable=(a=&gt;{let f=`visible`,e=10;const b=document.createElement(`div`);b.id=`runsManifest`;b.classList.add(`runsManifestBox`,`ag-theme-alpine`);document.getElementById(`rootContainerDiv`).appendChild(b);const c=LAYOUT_MANAGER.layout[b.id];if(c){b.style.cssText=`position: absolute; width: $</span><span class="si">{c.width}</span><span class="s1">px; height: $</span><span class="si">{c.height}</span><span class="s1">px; left: $</span><span class="si">{c.x}</span><span class="s1">px; top: $</span><span class="si">{c.y}</span><span class="s1">px; margin-bottom: 20px; $</span><span class="si">{DEFAULT_STYLE}</span><span class="s1">`};LAYOUT_MANAGER.makeElementDraggable(b);const d={columnDefs:createColumnDefs(a),rowData:a,pagination:!0,enableCellTextSelection:!0,enableBrowserTooltips:!0,rowSelection:`multiple`,pagination:!0,paginationPageSize:e,paginationPageSizeSelector:[1,2,5,e,25,50,100,500,1000],defaultColDef:{resizable:!0,filter:!0,floatingFilter:!0,menuTabs:[]},domLayout:`autoHeight`,onFirstDataRendered:(a=&gt;{adjustTableHeight(b)}),onPaginationChanged:(a=&gt;{adjustTableHeight(b)}),initialState:LAYOUT_MANAGER.grid_state};GRID_API=agGrid.createGrid(b,d);GRID_API.forEachNode(a=&gt;{const b=a.data.id.syllabic;const c=LAYOUT_MANAGER.visibilityState[b]!==!1;a.setDataValue(f,c)});GRID_API.refreshCells({force:!0,columns:[f]});GRID_API.onFilterChanged()});var init=(async()=&gt;{await DATA_MANAGER.loadManifest();LAYOUT_MANAGER=new LayoutManager(DATA_MANAGER.projectName);await LAYOUT_MANAGER.loadLayout(do_update=!1);await headerButtons();await PLOT_MANAGER.createAllPlots();await DATA_MANAGER.loadRuns();await createRunsManifestTable(DATA_MANAGER.summaryManifest);await PLOT_MANAGER.populateAllPlots();try{feather.replace();const a=document.querySelectorAll(`i[data-feather]`);a.forEach(a=&gt;{a.innerHTML=``})}catch(a){createNotification(`Feather icons not found, keeping text fallback`,`error`)}console.log(`init complete`);feather.replace();await DATA_MANAGER.refreshData()});var adjustTableHeight=(a=&gt;{const b=a.querySelector(`.ag-center-cols-viewport`).offsetHeight;const c=a.querySelector(`.ag-header`).offsetHeight;const d=a.querySelector(`.ag-paging-panel`).offsetHeight;const e=b+ c+ d+ 50;a.style.minHeight=`$</span><span class="si">{e}</span><span class="s1">px`});var blinkElement=((a,b,c)=&gt;{let e=`blink-border`;const d=document.getElementById(a);d.classList.add(e);setTimeout(()=&gt;{d.classList.remove(e)},1000)});var createNotification=((a,b=g,c=null,d=!0)=&gt;{let g=`info`,h=`.notification`,i=10;var f=(()=&gt;{const a=document.querySelectorAll(h);let b=i;a.forEach(a=&gt;{a.style.transform=`translateY($</span><span class="si">{b}</span><span class="s1">px)`;b+=a.offsetHeight+ i})});const e=`[$</span><span class="si">{b}</span><span class="s1">]: $</span><span class="si">{a}</span><span class="se">\\</span><span class="s1">n${c?c:``}`;switch(b){case g:console.log(e);if(c){console.log(c)};break;case `warning`:console.warn(e);if(c){console.warn(c)};break;case `error`:console.error(e);if(c){console.error(c)};break;default:console.log(e);if(c){console.log(c)}}if(d){const c=document.createElement(`div`);c.textContent=a;c.style.cssText=`</span><span class="se">\n\t\t\t</span><span class="s1">position: fixed;</span><span class="se">\n\t\t\t</span><span class="s1">top: 10px;</span><span class="se">\n\t\t\t</span><span class="s1">right: 10px;</span><span class="se">\n\t\t\t</span><span class="s1">padding: 10px;</span><span class="se">\n\t\t\t</span><span class="s1">border-radius: 5px;</span><span class="se">\n\t\t\t</span><span class="s1">background-color: $</span><span class="si">{NOTIFICATION_CONFIG.colors[b]}</span><span class="s1">;</span><span class="se">\n\t\t\t</span><span class="s1">border: 1px solid $</span><span class="si">{NOTIFICATION_CONFIG.border_colors[b]}</span><span class="s1">;</span><span class="se">\n\t\t\t</span><span class="s1">box-shadow: 0 2px 5px rgba(0,0,0,0.2);</span><span class="se">\n\t\t\t</span><span class="s1">transition: transform 0.3s ease-out, opacity 0.3s ease-out;</span><span class="se">\n\t\t\t</span><span class="s1">z-index: 1000;</span><span class="se">\n\t\t\t</span><span class="s1">opacity: 0;  // Start with 0 opacity for fade-in effect</span><span class="se">\n\t\t</span><span class="s1">`;c.classList.add(`notification`);const d=document.querySelector(h);if(d){document.body.insertBefore(c,d)}else{document.body.appendChild(c)};c.offsetHeight;c.style.opacity=`1`;setTimeout(f,i);setTimeout(()=&gt;{c.style.opacity=`0`;c.style.transform+=` translateX(100%)`;setTimeout(()=&gt;{c.remove();f()},300)},NOTIFICATION_CONFIG.timeout)}});var isISODate=(a=&gt;{const b=/^</span><span class="se">\\</span><span class="s1">d</span><span class="si">{4}</span><span class="s1">-</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">-</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">T</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">:</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">:</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">(.</span><span class="se">\\</span><span class="s1">d+)?(Z|[+-]</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">:</span><span class="se">\\</span><span class="s1">d</span><span class="si">{2}</span><span class="s1">)?$/;return b.test(a)});var toggleRowsVisibility=(a=&gt;{let e=0,f=`visible`;const b=new Set(GRID_API.getRenderedNodes().map(a=&gt;a.data.id.syllabic));let c=[];let d;GRID_API.forEachNode(d=&gt;{const e=b.has(d.data.id.syllabic);if(a===e){c.push(d)}});if(c.length&gt;e){d=!c[e].data.visible};c.forEach(a=&gt;{a.setDataValue(f,d);LAYOUT_MANAGER.visibilityState[a.data.id.syllabic]=d});DATA_MANAGER.metricNames.forEach(a=&gt;{PLOT_MANAGER.updatePlot(a)});GRID_API.refreshCells({force:!0,columns:[f],rowNodes:c})});var fancyCellRenderer=(a=&gt;{let d=null;var b;if(a.value===undefined){return c}else{b=a.value};var c=document.createElement(`div`);c.title=b;c.textContent=b;c.style.cursor=`pointer`;if(b!==d){if(typeof b===`object`){b=JSON.stringify(b,d,4)};if(b.length&gt;50){c.title=b;c.innerHTML=feather.icons[`mouse-pointer`].toSvg()+ feather.icons[`copy`].toSvg();c.style.cssText=`font-size: 20px; display: flex; justify-content: center; align-items: center; background-color: #f4f4f4; border: 1px solid #d4d4d4; border-radius: 5px; height: 30px; width: 60px;`}};c.onclick=(()=&gt;{navigator.clipboard.writeText(b).then((()=&gt;{console.log(`Successfully copied to clipboard`)})).catch((a=&gt;{console.error(`Could not copy text to clipboard: `,a)}))});c.oncontextmenu=(()=&gt;{const c=window.open(``,`_blank`);c.document.write(`&lt;pre&gt;`+ b+ `&lt;/pre&gt;`);c.document.title=a.node.data.id.run+ ` : `+ a.colDef.headerName;c.document.close()});return c});let LAYOUT_MANAGER=null;let PLOTLY_LAYOUTS=</span><span class="si">{}</span><span class="s1">;let GRID_API=null;const DEFAULT_XUNITS=`samples`;const LAYOUT_CONFIG={&quot;plot_cont_height&quot;:300,&quot;plotcont_frac&quot;:0.4,&quot;elements_initial_offset_y&quot;:200,&quot;minimum_dims&quot;:{width:250,height:150},&quot;table_init_height&quot;:800,&quot;plot_bottom_margin_px&quot;:5,&quot;snap_interval_default&quot;:50,&quot;settings_width_px&quot;:100};const NOTIFICATION_CONFIG={colors:{</span><span class="se">\&#39;</span><span class="s1">info</span><span class="se">\&#39;</span><span class="s1">:`lightgreen`,</span><span class="se">\&#39;</span><span class="s1">warning</span><span class="se">\&#39;</span><span class="s1">:`lightyellow`,</span><span class="se">\&#39;</span><span class="s1">error</span><span class="se">\&#39;</span><span class="s1">:`lightcoral`},border_colors:{</span><span class="se">\&#39;</span><span class="s1">info</span><span class="se">\&#39;</span><span class="s1">:`green`,</span><span class="se">\&#39;</span><span class="s1">warning</span><span class="se">\&#39;</span><span class="s1">:`orange`,</span><span class="se">\&#39;</span><span class="s1">error</span><span class="se">\&#39;</span><span class="s1">:`red`},timeout:5000};const AUTO_REFRESH_CONFIG={interval:-1,select_options:[{value:-1,label:`Off`},{value:1,label:`1`},{value:5,label:`5`},{value:10,label:`10`},{value:30,label:`30`},{value:60,label:`60`},{value:100,label:`100`},{value:1000,label:`1000`}]};const DEFAULT_AUTO_REFRESH=10;const DEFAULT_STYLE={border:`1px solid black`,backgroundColor:`#f0f0f0`,borderRadius:`10px`,padding:`3px`};const PLOTLY_LAYOUT_MARGIN={l:40,r:30,b:40,t:50,pad:0};class IOManager{constructor(){this.fileTimestamps=</span><span class="si">{}</span><span class="s1">}async fetchWithNoCache(a){const b=new Headers({</span><span class="se">\&#39;</span><span class="s1">Cache-Control</span><span class="se">\&#39;</span><span class="s1">:`no-cache, no-store, must-revalidate`,</span><span class="se">\&#39;</span><span class="s1">Pragma</span><span class="se">\&#39;</span><span class="s1">:`no-cache`,</span><span class="se">\&#39;</span><span class="s1">Expires</span><span class="se">\&#39;</span><span class="s1">:`0`});return fetch(a,{method:`GET`,headers:b,credentials:`same-origin`})}async fetchJson(a,b=!1){let c=null;try{let d=c;if(b){d=await this.fetchWithNoCache(a)}else{d=await fetch(a)};if(!d.ok)throw new Error(`HTTP error! status: $</span><span class="si">{d.status}</span><span class="s1">`);return await d.json()}catch(a){createNotification(`Fetch JSON error: $</span><span class="si">{a}</span><span class="s1">`,`error`,a);return c}}async fetchJsonLines(a,b=!1,c=!1){let d=null,g=`error`,e=1,f=JSON.parse;try{let h=d;if(b){h=await this.fetchWithNoCache(a)}else{h=await fetch(a)};if(!h.ok){let a=h?h.status:`unknown`;throw new Error(`HTTP error! status: $</span><span class="si">{a}</span><span class="s1">`)};const i=await h.text();const j=i.trim().split(`</span><span class="se">\\\\</span><span class="s1">n`);const k=j.slice(0,-e).map(a=&gt;f(a));try{const a=f(j[j.length- e]);k.push(a)}catch(b){if(c){createNotification(`Invalid JSON in the last line of $</span><span class="si">{a}</span><span class="s1">: $</span><span class="si">{b}</span><span class="s1">`,g,b)}}return k}catch(a){createNotification(`Fetch JSON Lines error: $</span><span class="si">{a}</span><span class="s1">`,g,a);return d}}async saveJsonLocal(a,b){const c=JSON.stringify(b);localStorage.setItem(a,btoa(c))}async readJsonLocal(a){const b=localStorage.getItem(a);if(b){const a=atob(b);return JSON.parse(a)}else{return null}}async deleteJsonLocal(a){localStorage.removeItem(a)}async getFileModificationTime(a){let b=Date;try{const c=await fetch(a+ `?t=`+ new b().getTime(),{method:`HEAD`});if(!c.ok)throw new Error(`HTTP error! status: $</span><span class="si">{c.status}</span><span class="s1">`);return new b(c.headers.get(`Last-Modified`))}catch(a){createNotification(`Error fetching file modification time: $</span><span class="si">{a}</span><span class="s1">`,`error`,a);return null}}async fetchJsonIfModified(a){let c=null;const b=await this.getFileModificationTime(a);if(!b)return c;if(!this.fileTimestamps[a]||b&gt;this.fileTimestamps[a]){const d=await this.fetchJson(a);if(d!==c){this.fileTimestamps[a]=b};return d};return c}async fetchJsonLinesIfModified(a){let c=null;const b=await this.getFileModificationTime(a);if(!b)return c;if(!this.fileTimestamps[a]||b&gt;this.fileTimestamps[a]){const d=await this.fetchJsonLines(a);if(d!==c){this.fileTimestamps[a]=b};return d};return c}}const IO_MANAGER=new IOManager();class RunData{constructor(a){let b=null;this.path=a;this.config=b;this.meta=b;this.metrics=b;this.logs=b;this.artifacts=b}async loadData(){this.config=await IO_MANAGER.fetchJson(`$</span><span class="si">{this.path}</span><span class="s1">/config.json`);this.meta=await IO_MANAGER.fetchJson(`$</span><span class="si">{this.path}</span><span class="s1">/meta.json`);this.metrics=await IO_MANAGER.fetchJsonLines(`$</span><span class="si">{this.path}</span><span class="s1">/metrics.jsonl`);this.logs=await IO_MANAGER.fetchJsonLines(`$</span><span class="si">{this.path}</span><span class="s1">/log.jsonl`);this.artifacts=await IO_MANAGER.fetchJsonLines(`$</span><span class="si">{this.path}</span><span class="s1">/artifacts.jsonl`)}pairMetrics(a,b){let e=isNaN;const c=[];const d=[];if(this.metrics){this.metrics.forEach(f=&gt;{const g=f[a];const h=f[b];if(!e(g)&amp;&amp;!e(h)){c.push(g);d.push(h)}})};return [c,d]}static smoothData(a,b=null,c=g){let h=0,j=1,k=2,g=`SMA`,i=Math;if(a.some(isNaN)){createNotification(`Data contains NaN values`,`warning`)};if(!b){return a};const d=[];switch(c){case g:for(let c=h;c&lt;a.length;c++){const e=i.max(h,c- b+ j);const f=a.slice(e,c+ j);const g=f.reduce((a,b)=&gt;a+ b,h);const k=g/f.length;d.push(k)};break;case `EMA`:let e=a[h];const f=k/(b+ j);for(let b=h;b&lt;a.length;b++){e=f*a[b]+ (j- f)*(b&gt;h?e:a[b]);d.push(e)};break;case `Gaussian`:for(let c=h;c&lt;a.length;c++){let e=h;let f=h;for(let d=-b;d&lt;=b;d++){if(c+ d&gt;=h&amp;&amp;c+ d&lt;a.length){const g=i.exp(-(d*d)/(k*b*b));e+=a[c+ d]*g;f+=g}};const g=e/f;d.push(g)};break;default:createNotification(`Invalid smoothing method: $</span><span class="si">{c}</span><span class="s1">`,`error`);return []}return d}}class DataManager{constructor(){let a=null,b=Set;this.manifest=a;this.allRuns=</span><span class="si">{}</span><span class="s1">;this.metricNames=new b();this.projectName=a;this.summaryManifest=a;this.lastRefreshTime=a;this.updatedRuns=new b()}async loadManifest(){let b=`error`;this.manifest=await IO_MANAGER.fetchJsonLines(`runs.jsonl`,!0);if(!this.manifest){createNotification(`Failed to load manifest`,b)};const a=new Set();for(const b of this.manifest){a.add(b.project);b.metric_names.forEach(a=&gt;{this.metricNames.add(a)})};if(a.size===1){this.projectName=a.values().next().value}else{createNotification(`Project names are not consistent across runs: $</span><span class="si">{a}</span><span class="s1">`,b)}}async loadRuns(){if(!this.manifest){this.loadManifest()};for(const a of this.manifest){const b=new RunData(`runs/$</span><span class="si">{a.run_id}</span><span class="s1">`);await b.loadData();this.allRuns[a.run_id]=b};this.updateSummaryManifest()}updateSummaryManifest(){let b=0,d=null,c=1,f=Date,a=Object,e=undefined;try{if(a.keys(this.allRuns).length===b){throw `No runs found`}}catch(a){createNotification(`Could not find any runs to update summary manifest: $</span><span class="si">{a}</span><span class="s1">`,`error`)}this.summaryManifest=a.values(this.allRuns).map(a=&gt;{const g=a.logs.length&gt;b?a.logs[a.logs.length- c].timestamp:d;let h=</span><span class="si">{}</span><span class="s1">;for(let d=a.metrics.length- c;d&gt;=b;d--){this.metricNames.forEach(b=&gt;{if(a.metrics[d][b]!==e&amp;&amp;h[b]===e){h[b]=a.metrics[d][b]}})};const i=a.metrics[a.metrics.length- c];let j=</span><span class="si">{}</span><span class="s1">;for(let a of [`samples`,`batches`,`epochs`,`latest_checkpoint`]){if(i){j[a]=i[a]}else{j[a]=d}};return {id:{syllabic:a.meta.syllabic_id,run:a.meta.run_id,group:a.meta.group},timing:{start:a.meta.run_init_timestamp,final:g,duration:new f(g)- new f(a.meta.run_init_timestamp)},final_metrics:h,final_state:j,config:a.config,meta:a.meta}})}async refreshData(a=!0){let d=`info`,e=JSON.stringify;if(a){createNotification(`Checking for data updates...`,d)};let b=!1;this.updatedRuns.clear();const c=await IO_MANAGER.fetchJsonLines(`runs.jsonl`,!0);if(e(c)!==e(this.manifest)){this.manifest=c;console.log(this.manifest);b=!0;createNotification(`Manifest file updated`,d)};for(const a of this.manifest){const c=`runs/$</span><span class="si">{a.run_id}</span><span class="s1">`;const d=await IO_MANAGER.fetchJsonIfModified(`$</span><span class="si">{c}</span><span class="s1">/config.json`);const e=await IO_MANAGER.fetchJsonIfModified(`$</span><span class="si">{c}</span><span class="s1">/meta.json`);const f=await IO_MANAGER.fetchJsonLinesIfModified(`$</span><span class="si">{c}</span><span class="s1">/metrics.jsonl`);const g=await IO_MANAGER.fetchJsonLinesIfModified(`$</span><span class="si">{c}</span><span class="s1">/log.jsonl`);const h=await IO_MANAGER.fetchJsonLinesIfModified(`$</span><span class="si">{c}</span><span class="s1">/artifacts.jsonl`);if(d||e||f||g||h){const i=this.allRuns[a.run_id]||new RunData(c);if(d)i.config=d;if(e)i.meta=e;if(f)i.metrics=f;if(g)i.logs=g;if(h)i.artifacts=h;this.allRuns[a.run_id]=i;b=!0;this.updatedRuns.add(a.run_id);console.log(`Updated data for run $</span><span class="si">{a.run_id}</span><span class="s1">`)}};if(b){this.metricNames.clear();for(const a of this.manifest){a.metric_names.forEach(a=&gt;{this.metricNames.add(a)})};this.updateSummaryManifest();this.lastRefreshTime=new Date();const b=DATA_MANAGER.getUpdatedRunsInfo();await PLOT_MANAGER.populateAllPlots();GRID_API.setGridOption(`rowData`,DATA_MANAGER.summaryManifest);GRID_API.refreshCells({force:!0});if(b.count&gt;0){createNotification(`Data refreshed successfully. $</span><span class="si">{b.count}</span><span class="s1"> run(s) updated`+ (b.count&lt;3?`: ${b.runs.join(`, `)}`:``),d,b,a)}else{createNotification(`Manifest updated, but no individual runs were changed`,d,b,a)}}else{createNotification(`No new data updates found`,d,null,a)};return b}initAutoRefresh(){const a=document.getElementById(`autoRefreshSelect`);AUTO_REFRESH_CONFIG.select_options.forEach(b=&gt;{const c=document.createElement(`option`);c.value=b.value;c.textContent=b.label;if(b.value===AUTO_REFRESH_CONFIG.interval){c.selected=!0};a.appendChild(c)});a.addEventListener(`change`,()=&gt;{this.setAutoRefresh(parseFloat(a.value))});this.setAutoRefresh(AUTO_REFRESH_CONFIG.interval)}setAutoRefresh(a){let b=`info`;if(this.autoRefreshInterval){clearInterval(this.autoRefreshInterval)};if(a&gt;0){this.autoRefreshInterval=setInterval(()=&gt;{this.refreshData(!1).then(()=&gt;{blinkElement(`autoRefreshButton`)})},a*1000);createNotification(`Auto refresh set to $</span><span class="si">{a}</span><span class="s1"> seconds`,b)}else{createNotification(`Auto refresh turned off`,b)}}getUpdatedRunsInfo(){return {count:this.updatedRuns.size,runs:Array.from(this.updatedRuns)}}}const DATA_MANAGER=new DataManager();class LayoutManager{constructor(a){this.projectName=a;this.layout=</span><span class="si">{}</span><span class="s1">;this.do_snap=!0;this.snapInterval=LAYOUT_CONFIG.snap_interval_default;this.plot_configs=</span><span class="si">{}</span><span class="s1">;this.grid_state=null;this.visibilityState=</span><span class="si">{}</span><span class="s1">;this.init_y=this.round_to_snap_interval(LAYOUT_CONFIG.elements_initial_offset_y);this.default_plot_cont_height=this.round_to_snap_interval(LAYOUT_CONFIG.plot_cont_height);const b=window.innerWidth;this.default_plot_cont_width=this.round_to_snap_interval(b*LAYOUT_CONFIG.plotcont_frac);this.table_width=this.round_to_snap_interval(b- (this.default_plot_cont_width+ this.snapInterval))}round_to_snap_interval(a){return Math.ceil(a/this.snapInterval)*this.snapInterval}get_default_layout(a,b=!0){let f=0;const c=Array.from(a);var d=</span><span class="si">{}</span><span class="s1">;const e=this.round_to_snap_interval(this.default_plot_cont_height*1.1);for(let a=f;a&lt;c.length;a++){const b=c[a];d[`plotContainer-$</span><span class="si">{b}</span><span class="s1">`]={x:f,y:this.init_y+ a*e,height:this.default_plot_cont_height,width:this.default_plot_cont_width}};d[`runsManifest`]={x:this.default_plot_cont_width+ LAYOUT_CONFIG.snap_interval_default,y:this.init_y,height:LAYOUT_CONFIG.table_init_height,width:this.table_width};if(b){this.layout=d};return d}async getDefaultPlotConfig(){let a=`linear`;return {size:{width:this.default_plot_cont_width- LAYOUT_CONFIG.settings_width_px,height:this.default_plot_cont_height},axisScales:{x:a,y:a},smoothing_method:`SMA`,smoothing_span:null,xUnits:DEFAULT_XUNITS}}async getPlotConfig(a){if(!(a in this.plot_configs)){this.plot_configs[a]=await this.getDefaultPlotConfig()};return this.plot_configs[a]}makeElementDraggable(a){let d=`draggable`;const b=a.id;let c=this.getInitialPosition(a);if(!a.classList.contains(d)){a.classList.add(d)};this.initializeDragInteraction(a,c);this.initializeResizeInteraction(a,c);this.updateElementLayout(a,c.x,c.y,!0)}getInitialPosition(a){let d=0,c=parseFloat;const b=a.id;if(this.layout[b]){return {x:this.layout[b].x,y:this.layout[b].y}}else{return {x:c(a.getAttribute(`data-x`))||d,y:c(a.getAttribute(`data-y`))||d}}}initializeDragInteraction(a,b){let d=1,c=0;interact(a).draggable({ignoreFrom:`.draglayer, .ag-header, .ag-center-cols-container, .no-drag, .legend, .bg, .scrollbox`,modifiers:[interact.modifiers.snap({targets:[interact.snappers.grid({x:this.snapInterval,y:this.snapInterval})],range:Infinity,relativePoints:[{x:c,y:c}]}),interact.modifiers.restrict({restriction:`parent`,elementRect:{top:c,left:c,bottom:d,right:d},endOnly:!0})],inertia:!0}).on(`dragmove`,a=&gt;{b.x+=a.dx;b.y+=a.dy;this.updateElementLayout(a.target,b.x,b.y,!0)})}initializeResizeInteraction(a,b){interact(a).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},modifiers:[interact.modifiers.snapSize({targets:[interact.snappers.grid({width:this.snapInterval,height:this.snapInterval})],range:Infinity}),interact.modifiers.restrictSize({min:LAYOUT_CONFIG.minimum_dims})],inertia:!0}).on(`resizemove`,a=&gt;{const {width:c,height:d}=a.rect;b.x+=a.deltaRect.left;b.y+=a.deltaRect.top;const e=a.target;this.updateElementLayout(e,b.x,b.y,!1,c,d);const f=e.classList.contains(`plotContainer`);if(f){const b=e.querySelector(`.plotSettings`);const c=e.querySelector(`.plotDiv`);var g=a.rect.width- LAYOUT_CONFIG.settings_width_px;b.style.width=g;c.style.width=`$</span><span class="si">{g}</span><span class="s1">px`;c.style.height=`$</span><span class="si">{a.rect.height}</span><span class="s1">px`;const d=c.id;Plotly.relayout(d,{width:g,height:a.rect.height- LAYOUT_CONFIG.plot_bottom_margin_px});const f=d.split(`-`)[1];this.plot_configs[f].size={width:g,height:a.rect.height};PLOTLY_LAYOUTS[f].width=g;PLOTLY_LAYOUTS[f].height=a.rect.height- LAYOUT_CONFIG.plot_bottom_margin_px}})}updateElementLayout(a,b,c,d=!0,e=g,f=g){let g=null;if(d){a.style.left=`$</span><span class="si">{b}</span><span class="s1">px`;a.style.top=`$</span><span class="si">{c}</span><span class="s1">px`};if(e&amp;&amp;f){a.style.width=`$</span><span class="si">{e}</span><span class="s1">px`;a.style.height=`$</span><span class="si">{f}</span><span class="s1">px`}else{e=a.offsetWidth;f=a.offsetHeight};this.layout[a.id]={x:b,y:c,width:e,height:f}}updateAllLayouts(){for(const a in this.layout){const b=this.layout[a];const c=document.getElementById(a);const d=this.getInitialPosition(c);this.updateElementLayout(c,b.x,b.y,!0,b.width,b.height)}}get_local_storage_key(){return `$</span><span class="si">{this.projectName}</span><span class="s1">_layout`}async saveLayout(){let c=JSON.stringify;this.updateGridState();const a=this.get_local_storage_key();IO_MANAGER.saveJsonLocal(a,this);const b=await IO_MANAGER.readJsonLocal(a);if(b&amp;&amp;c(b)==c(this)){console.log(`Layout saved:`,b);createNotification(`Layout saved`,`info`)}else{console.error(`Layout not saved:`,this,b);createNotification(`Layout not saved`,`error`)}}async loadLayout(a=!0){const b=this.get_local_storage_key();const c=await IO_MANAGER.readJsonLocal(b);if(c){this.projectName=c.projectName;this.layout=c.layout;this.do_snap=c.do_snap;this.snapInterval=c.snapInterval;this.plot_configs=c.plot_configs;this.grid_state=c.grid_state;this.visibilityState=c.visibilityState}else{this.layout=this.get_default_layout(DATA_MANAGER.metricNames)};console.log(`Layout loaded:`,this);if(a){this.updateAllLayouts()}}async updateSnap(a=!0,b=LAYOUT_CONFIG.snap_interval_default){this.do_snap=a;if(!a){b=1};this.snapInterval=b;console.log(`Snap settings updated:`,this.do_snap,this.snapInterval);for(const a in this.layout){const b=document.getElementById(a);let c=this.getInitialPosition(b);this.initializeDragInteraction(b,c);this.initializeResizeInteraction(b,c)}}updateGridState(){this.grid_state=GRID_API.getState()}}class PlotManager{constructor(){this.plots=</span><span class="si">{}</span><span class="s1">}async createPlot(a){let i=JSON;const b=`plotContainer-$</span><span class="si">{a}</span><span class="s1">`;const c=`plot-$</span><span class="si">{a}</span><span class="s1">`;const d=`plotSettings-$</span><span class="si">{a}</span><span class="s1">`;const e=await LAYOUT_MANAGER.getPlotConfig(a);const f=LAYOUT_MANAGER.layout[b];const g=`</span><span class="se">\n\t\t\t</span><span class="s1">&lt;div</span><span class="se">\n\t\t\t\t</span><span class="s1">id=&quot;$</span><span class="si">{b}</span><span class="s1">&quot;</span><span class="se">\n\t\t\t\t</span><span class="s1">class=&quot;plotContainer&quot; </span><span class="se">\n\t\t\t\t</span><span class="s1">style=&quot;margin-bottom: 10px; display: flex; flex-direction: row; position: absolute; width: $</span><span class="si">{f.width}</span><span class="s1">px; height: $</span><span class="si">{f.height}</span><span class="s1">px; left: $</span><span class="si">{f.x}</span><span class="s1">px; top: $</span><span class="si">{f.y}</span><span class="s1">px; $</span><span class="si">{DEFAULT_STYLE}</span><span class="s1">&quot;</span><span class="se">\n\t\t\t</span><span class="s1">&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;div </span><span class="se">\n\t\t\t\t\t</span><span class="s1">id=&quot;$</span><span class="si">{c}</span><span class="s1">&quot;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">class=&quot;plotDiv&quot; </span><span class="se">\n\t\t\t\t\t</span><span class="s1">style=&quot;width: ${f.width- LAYOUT_CONFIG.settings_width_px}px; height: ${f.height- LAYOUT_CONFIG.plot_bottom_margin_px}px;&quot;</span><span class="se">\n\t\t\t\t</span><span class="s1">&gt;&lt;/div&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;div </span><span class="se">\n\t\t\t\t\t</span><span class="s1">id=&quot;$</span><span class="si">{d}</span><span class="s1">&quot;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">class=&quot;plotSettings&quot; </span><span class="se">\n\t\t\t\t\t</span><span class="s1">style=&quot;width: $</span><span class="si">{LAYOUT_CONFIG.settings_width_px}</span><span class="s1">; flex-shrink: 0; flex-grow: 0;&quot;</span><span class="se">\n\t\t\t\t</span><span class="s1">&gt;&lt;/div&gt;</span><span class="se">\n\t\t\t</span><span class="s1">&lt;/div&gt;</span><span class="se">\n\t\t</span><span class="s1">`;document.getElementById(`rootContainerDiv`).insertAdjacentHTML(`beforeend`,g);this.plots[a]={plotID:c,containerID:b,settingsID:d};const h={title:`$</span><span class="si">{a}</span><span class="s1"> over $</span><span class="si">{e.xUnits}</span><span class="s1">`,autosize:!0,xaxis:{title:e.xUnits,type:e.axisScales.x,showgrid:!0},yaxis:{title:a,type:e.axisScales.y,showgrid:!0},margin:PLOTLY_LAYOUT_MARGIN,width:f.width- LAYOUT_CONFIG.settings_width_px,height:f.height- LAYOUT_CONFIG.plot_bottom_margin_px};PLOTLY_LAYOUTS[a]=h;Plotly.newPlot(c,[],i.parse(i.stringify(h)));this.createAxisToggles(a);this.createSmoothingInput(a);LAYOUT_MANAGER.makeElementDraggable(document.getElementById(b))}async createAllPlots(a=50,b=150){const c=DATA_MANAGER.metricNames;let d=0;c.forEach(a=&gt;{d+=1;console.log(`creating plot $</span><span class="si">{d}</span><span class="s1"> for $</span><span class="si">{a}</span><span class="s1">`);this.createPlot(a)})}async updatePlot(a){let e=JSON;const b=this.plots[a];const c=await LAYOUT_MANAGER.getPlotConfig(a);if(!b){console.error(`Plot for metric $</span><span class="si">{a}</span><span class="s1"> not found.`);return};var d=[];for(const b in DATA_MANAGER.allRuns){const e=DATA_MANAGER.allRuns[b];const f=e.meta.syllabic_id;const [g,h]=e.pairMetrics(DEFAULT_XUNITS,a);let i=RunData.smoothData(h,c.smoothing_span,c.smoothing_method);const j={x:g,y:i,mode:`lines`,line:c.smoothing_span?{shape:`spline`}:</span><span class="si">{}</span><span class="s1">,name:f,visible:LAYOUT_MANAGER.visibilityState[f]!==!1?!0:`legendonly`};d.push(j)};PLOTLY_LAYOUTS[a].xaxis.type=c.axisScales.x;PLOTLY_LAYOUTS[a].yaxis.type=c.axisScales.y;PLOTLY_LAYOUTS[a].uirevision=a;Plotly.react(b.plotID,d,e.parse(e.stringify(PLOTLY_LAYOUTS[a])))}updateTraceVisibility(a,b){LAYOUT_MANAGER.visibilityState[a]=b;for(const c of DATA_MANAGER.metricNames){const d=this.plots[c];if(d){Plotly.restyle(d.plotID,{visible:b?!0:`legendonly`},[this.getTraceIndex(d.plotID,a)])}}}getTraceIndex(a,b){const c=document.getElementById(a);const d=c.data;const e=d.findIndex(a=&gt;a.name===b);if(e&lt;0){console.error(`Trace for run $</span><span class="si">{b}</span><span class="s1"> not found in plot $</span><span class="si">{a}</span><span class="s1">`)};return e}updateAllVisibility(){for(const a of DATA_MANAGER.metricNames){this.updatePlot(a)}}async populateAllPlots(){for(const a of DATA_MANAGER.metricNames){this.updatePlot(a)}}updateAxisScale(a,b,c){const d=this.plots[a];if(!d){console.error(`Plot for metric $</span><span class="si">{a}</span><span class="s1"> not found.`);return};const e=LAYOUT_MANAGER.plot_configs[a];e.axisScales[b]=c;Plotly.relayout(d.plotID,{[`$</span><span class="si">{b}</span><span class="s1">axis`]:</span><span class="si">{type:c}</span><span class="s1">,uirevision:a})}createAxisToggles(a){let e=`log`;const b=this.plots[a].settingsID;const c=this.plots[a].plotID;const d=document.getElementById(b);[`x`,`y`].forEach(b=&gt;{const f=`$</span><span class="si">{c}</span><span class="s1">-$</span><span class="si">{b}</span><span class="s1">Toggle`;const g=`</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;div class=&quot;axis-toggle-container&quot; style=&quot;display: block;&quot;&gt;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">&lt;label for=&quot;$</span><span class="si">{f}</span><span class="s1">&quot; style=&quot;display: block;&quot;&gt;${b.toUpperCase()} Scale&lt;/label&gt;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">&lt;div style=&quot;display: flex; align-items: center;&quot;&gt;</span><span class="se">\n\t\t\t\t\t\t</span><span class="s1">&lt;i data-feather=&quot;arrow-up-right&quot;&gt;lin&lt;/i&gt;</span><span class="se">\n\t\t\t\t\t\t</span><span class="s1">&lt;label class=&quot;switch&quot;&gt;</span><span class="se">\n\t\t\t\t\t\t\t</span><span class="s1">&lt;input type=&quot;checkbox&quot; id=&quot;$</span><span class="si">{f}</span><span class="s1">&quot;&gt;</span><span class="se">\n\t\t\t\t\t\t\t</span><span class="s1">&lt;span class=&quot;slider round&quot;&gt;&lt;/span&gt;</span><span class="se">\n\t\t\t\t\t\t</span><span class="s1">&lt;/label&gt;</span><span class="se">\n\t\t\t\t\t\t</span><span class="s1">&lt;i data-feather=&quot;corner-right-up&quot;&gt;log&lt;/i&gt;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">&lt;/div&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;/div&gt;</span><span class="se">\n\t\t\t</span><span class="s1">`;const h=document.createElement(`div`);h.innerHTML=g.trim();d.appendChild(h);const i=document.getElementById(f);i.checked=LAYOUT_MANAGER.plot_configs[a].axisScales[b]===e;i.onchange=()=&gt;{const c=i.checked?e:`linear`;this.updateAxisScale(a,b,c)}})}async createSmoothingInput(a){const b=this.plots[a].plotID;const c=this.plots[a].settingsID;const d=[`SMA`,`EMA`,`Gaussian`];const e=`</span><span class="se">\n\t\t\t</span><span class="s1">&lt;div class=&quot;smoothing-input-container no-drag&quot; style=&quot;display: block; margin-top: 10px; border: 1px solid grey; border-radius: 3px;&quot;&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;label for=&quot;smoothingInput-$</span><span class="si">{b}</span><span class="s1">&quot; style=&quot;font-weight: bold;&quot;&gt;Smooth:&lt;/label&gt;&lt;br&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;label for=&quot;smoothingMethodSelect-$</span><span class="si">{b}</span><span class="s1">&quot;&gt;Method&lt;/label&gt;&lt;br&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;select class=&quot;no-drag&quot; id=&quot;smoothingMethodSelect-$</span><span class="si">{b}</span><span class="s1">&quot; style=&quot;width: 6em;&quot;&gt;</span><span class="se">\n\t\t\t\t\t</span><span class="s1">${d.map(a=&gt;`&lt;option value=&quot;$</span><span class="si">{a}</span><span class="s1">&quot;&gt;$</span><span class="si">{a}</span><span class="s1">&lt;/option&gt;`).join(``)}</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;/select&gt;&lt;br&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;label for=&quot;smoothingInput-$</span><span class="si">{b}</span><span class="s1">&quot;&gt;Span&lt;/label&gt;&lt;br&gt;</span><span class="se">\n\t\t\t\t</span><span class="s1">&lt;input class=&quot;no-drag&quot; type=&quot;number&quot; min=&quot;0&quot; max=&quot;1000&quot; value=&quot;0&quot; id=&quot;smoothingInput-$</span><span class="si">{b}</span><span class="s1">&quot; style=&quot;width: 4.2em;&quot;&gt;</span><span class="se">\n\t\t\t</span><span class="s1">&lt;/div&gt;</span><span class="se">\n\t\t</span><span class="s1">`;const f=document.createElement(`div`);f.innerHTML=e.trim();const g=document.getElementById(c);g.appendChild(f);const h=document.getElementById(`smoothingInput-$</span><span class="si">{b}</span><span class="s1">`);const i=document.getElementById(`smoothingMethodSelect-$</span><span class="si">{b}</span><span class="s1">`);h.value=LAYOUT_MANAGER.plot_configs[a].smoothing_span;i.value=LAYOUT_MANAGER.plot_configs[a].smoothing_method;h.onchange=()=&gt;{LAYOUT_MANAGER.plot_configs[a].smoothing_span=parseInt(h.value);this.updatePlot(a)};i.onchange=()=&gt;{LAYOUT_MANAGER.plot_configs[a].smoothing_method=i.value;this.updatePlot(a)}}}let PLOT_MANAGER=new PlotManager()&lt;/script&gt;&lt;body&gt;&lt;header id=mainHeader&gt;&lt;h1 id=projectH1&gt;&lt;a href=https://github.com/mivanit/trnbl&gt;trnbl&lt;/a&gt; Dashboard&lt;/h1&gt;&lt;button class=headerButton id=refreshButton&gt;&lt;i data-feather=refresh-cw&gt;&lt;/i&gt;&lt;i data-feather=bar-chart-2&gt;&lt;/i&gt; Refresh Data&lt;/button&gt;&lt;div class=headerButton id=autoRefreshButton&gt;&lt;label for=autoRefreshSelect&gt;&lt;i data-feather=refresh-cw&gt;&lt;/i&gt;&lt;i data-feather=clock&gt;&lt;/i&gt; Auto Refresh (s):&lt;/label&gt;&lt;select id=autoRefreshSelect&gt;&lt;/select&gt;&lt;/div&gt;&lt;button class=headerButton id=toggleVisibleRowsButton&gt;&lt;i data-feather=eye&gt;&lt;/i&gt;&lt;i data-feather=toggle-right&gt;&lt;/i&gt; Toggle Visible Rows&lt;/button&gt;&lt;button class=headerButton id=toggleFilteredRowsButton&gt;&lt;i data-feather=eye-off&gt;&lt;/i&gt;&lt;i data-feather=toggle-left&gt;&lt;/i&gt; Toggle Filtered Rows&lt;/button&gt;&lt;br&gt;&lt;br&gt;&lt;button class=headerButton id=saveLayoutButton&gt;&lt;i data-feather=save&gt;&lt;/i&gt;&lt;i data-feather=layout&gt;&lt;/i&gt; Save Current Layout&lt;/button&gt;&lt;button class=headerButton id=resetLayoutButton&gt;&lt;i data-feather=refresh-ccw&gt;&lt;/i&gt;&lt;i data-feather=layout&gt;&lt;/i&gt; Reset Layout&lt;/button&gt;&lt;button class=headerButton id=downloadLayoutButton&gt;&lt;i data-feather=download&gt;&lt;/i&gt;&lt;i data-feather=layout&gt;&lt;/i&gt; Download Current Layout&lt;/button&gt;&lt;div class=headerButton&gt;&lt;input id=gridSnapCheckbox type=checkbox&gt;&lt;label for=gridSnapCheckbox&gt;&lt;i data-feather=grid&gt;&lt;/i&gt; Grid Snap&lt;/label&gt;&lt;/div&gt;&lt;button class=headerButton id=resetColumnStateButton&gt;&lt;i data-feather=refresh-ccw&gt;&lt;/i&gt;&lt;i data-feather=columns&gt;&lt;/i&gt; Reset Column Sizes&lt;/button&gt;&lt;hr&gt;&lt;/header&gt;&lt;div class=rootContainer id=rootContainerDiv&gt;&lt;div id=invisHbar style=width:100em;height:100em&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt;document.addEventListener(`DOMContentLoaded`,init)&lt;/script&gt;&#39;</span>
</span></pre></div>


    

                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>