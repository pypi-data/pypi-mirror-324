<!DOCTYPE html>
<html>
<head>
    <title>Graph Caption Analysis Report</title>
    <style>
        body {font-family: Arial, sans-serif; max-width: 1800px; margin: 0 auto; padding: 20px;}
        .image-analysis {
            margin: 40px 0;
            border-bottom: 2px solid #eee;
            padding-bottom: 40px;
            display: grid;
            grid-template-columns: minmax(300px, 45%) 1fr;
            gap: 30px;
            align-items: start;
        }
        .image-container {position: sticky; top: 20px;}
        .image-container img {max-width: 100%; height: auto;}
        .caption-container {margin: 20px 0;}
        .tags-container {display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;}
        .tag-category {background: #f5f5f5; padding: 15px; border-radius: 8px;}
        .tag-item {margin: 5px 0;}
        .confidence {color: #666; font-size: 0.9em;}
        .verification {background: #fff3e0; padding: 15px; border-radius: 8px; margin: 20px 0;}
        .dense-caption {background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 20px 0;}
        h1 {margin-bottom: 40px; color: #333;}
        h2 {color: #444; margin-top: 30px;}
        h3 {color: #555;}
    </style>
</head>
<body>
    <h1>Graph Caption Analysis Report</h1>
    
    {% for caption in captions %}
    <div class="image-analysis">
        <div class="image-container">
            <img src="{{ caption.image_path }}" alt="Analyzed Image">
        </div>
        <div class="caption-container">
            <h2>Short Caption</h2>
            <p>{{ caption.short_caption }}</p>
            
            <h2>Tags</h2>
            <div class="tags-container">
                {% for category, tags in caption.tags_by_category.items() %}
                <div class="tag-category">
                    <h3>{{ category }}</h3>
                    {% for tag in tags %}
                    <div class="tag-item">
                        â€¢ {{ tag.tag }} <span class="confidence">({{ "%.2f"|format(tag.confidence) }})</span>
                    </div>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
            
            <h2>Verification</h2>
            <div class="verification">
                <p>{{ caption.verification }}</p>
            </div>
            
            <h2>Dense Caption</h2>
            <div class="dense-caption">
                <p>{{ caption.dense_caption }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</body>
</html> 