# Trafficbench

[![PyPiVersion](https://img.shields.io/pypi/v/trafficbench.svg)](https://pypi.org/project/trafficbench)
[![image](https://img.shields.io/pypi/pyversions/trafficbench.svg)](https://pypi.python.org/pypi/trafficbench)
[![Pytest](https://github.com/orgua/trafficbench/actions/workflows/py_unittest.yml/badge.svg)](https://github.com/orgua/trafficbench/actions/workflows/py_unittest.yml)
[![Ruff](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json)](https://github.com/astral-sh/ruff)

Python-Package to process & analyze logs generated by Trafficbench. This replaces the former collection of scripts.

## Installation

### PIP - Online

```Shell
pip install trafficbench -U
```

For bleeding-edge-features or dev-work it is possible to install directly from GitHub-Sources (here `dev`-branch):

```Shell
pip install git+https://github.com/nes-lab/TrafficBench.git@dev#subdirectory=py_package -U
```

### PIP - Offline

- clone repository
- navigate shell into directory
- install local module

```shell
git https://github.com/orgua/shepherd-targets
cd .\nrf52_rf_survey\trafficbench\py_package

pip3 install .
```

### Additional Install-Options

- `glue`: live analysis & visualization
- `lognplot`:
- `dev`: all tools used for development
- `test`: environment to run unittests

Example usage:

```shell
pip3 install .[glue]
pip3 install .[dev, test]
pip3 install .[all]
```

## Usage

### CLI

Examples

```shell
trafficbench --help
trafficbench receive --help
```

### As python library

see [examples](./examples)

## TODO

- publish on PyPI
- further break down long functions
- implement streaming-functionality -> a set of generators?
  - uart -> filter -> dump -> analyze
- further cleanup as ruff & flake8 report 300+ warnings/errors
- add proper documentation with tutorial, examples
- gts = global timestamp
  - only 32 bit, increments with 16 MHz, overflows > 4min
  - should be extended by counting overflows or get guided by receive-TS
- analyze packet reception rate
- plot graph
