Metadata-Version: 2.4
Name: rnzb
Version: 0.3.1
Classifier: Intended Audience :: Developers
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Rust
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Programming Language :: Python :: Implementation :: CPython
Classifier: Programming Language :: Python :: Implementation :: PyPy
Classifier: Typing :: Typed
License-File: LICENSE-APACHE
License-File: LICENSE-MIT
Summary: Python bindings to the nzb-rs library - a spec compliant parser for NZB files, written in Rust.
Keywords: nzb,usenet,parser
Author-email: Ravencentric <me@ravencentric.cc>
License: MIT OR Apache-2.0
Requires-Python: >=3.9
Description-Content-Type: text/markdown; charset=UTF-8; variant=GFM
Project-URL: Repository, https://github.com/Ravencentric/rnzb

# rnzb

[![Tests](https://img.shields.io/github/actions/workflow/status/Ravencentric/rnzb/tests.yml?label=tests)](https://github.com/Ravencentric/rnzb/actions/workflows/tests.yml)
[![Docs](https://img.shields.io/github/actions/workflow/status/Ravencentric/rnzb/docs.yml?label=docs)](https://github.com/Ravencentric/rnzb/actions/workflows/docs.yml)
[![Build](https://img.shields.io/github/actions/workflow/status/Ravencentric/rnzb/release.yml?label=build)](https://github.com/Ravencentric/rnzb/actions/workflows/release.yml)
![PyPI - Types](https://img.shields.io/pypi/types/rnzb)
![License](https://img.shields.io/pypi/l/rnzb?color=success)

[![PyPI - Latest Version](https://img.shields.io/pypi/v/rnzb?color=blue)](https://pypi.org/project/rnzb)
![PyPI - Python Version](https://img.shields.io/pypi/pyversions/rnzb)
![PyPI - Implementation](https://img.shields.io/pypi/implementation/rnzb)

Python bindings to the [nzb-rs](https://crates.io/crates/nzb-rs) library - a [spec](https://sabnzbd.org/wiki/extra/nzb-spec) compliant parser for [NZB](https://en.wikipedia.org/wiki/NZB) files, written in Rust.

## Table Of Contents

- [Installation](#installation)
- [Usage](#usage)
- [Related projects](#related-projects)
- [Performance](#performance)
- [Supported platforms](#supported-platforms)
- [Building from source](#building-from-source)
- [License](#license)
- [Contributing](#contributing)

## Installation

`rnzb` is available on [PyPI](https://pypi.org/project/rnzb/), so you can simply use pip to install it.

```bash
pip install rnzb
```

## Usage

```py
from rnzb import Nzb

nzb = Nzb.from_file("big_buck_bunny.nzb")

print(f"{nzb.file.name} ({nzb.meta.category}) was posted on {nzb.file.posted_at} by {nzb.file.poster}.")
#> Big Buck Bunny - S01E01.mkv (TV) was posted on 2024-01-28 11:18:28+00:00 by John <nzb@nowhere.example>.

for file in nzb.files:
    print(file.name)
    #> Big Buck Bunny - S01E01.mkv
    #> Big Buck Bunny - S01E01.mkv.par2
    #> Big Buck Bunny - S01E01.mkv.vol00+01.par2
    #> Big Buck Bunny - S01E01.mkv.vol01+02.par2
    #> Big Buck Bunny - S01E01.mkv.vol03+04.par2
```

For more details, check out the [API reference](https://rnzb.ravencentric.cc/).

## Related projects

Considering this is the fourth library for parsing a file format that almost nobody cares about and lacks a formal specification, here's an overview to help you decide:

| Project                                                  | Description                 | Parser | Meta Editor |
| -------------------------------------------------------- | --------------------------- | ------ | ----------- |
| [`nzb`](https://pypi.org/project/nzb)                    | Original Python Library     | ‚úÖ     | ‚úÖ          |
| [`nzb-rs`](https://crates.io/crates/nzb-rs)              | Rust port of `nzb`          | ‚úÖ     | ‚ùå          |
| [`rnzb`](https://pypi.org/project/nzb)                   | Python bindings to `nzb-rs` | ‚úÖ     | ‚ùå          |
| [`nzb-parser`](https://www.npmjs.com/package/nzb-parser) | Javascript port of `nzb`    | ‚úÖ     | ‚ùå          |

## Performance

Although [`nzb`](https://pypi.org/project/nzb) is already quite fast due to its use of the non-validating C-based [expat](https://docs.python.org/3/library/pyexpat.html) parser from Python's standard library, `rnzb` offers even better performance, being approximately 8 times faster than `nzb`.

```console
$ hyperfine --warmup 1 "python test_nzb.py" "python test_rnzb.py"
Benchmark 1: python test_nzb.py
  Time (mean ¬± œÉ):      6.306 s ¬±  0.075 s    [User: 5.992 s, System: 0.225 s]
  Range (min ‚Ä¶ max):    6.225 s ‚Ä¶  6.478 s    10 runs

Benchmark 2: python test_rnzb.py
  Time (mean ¬± œÉ):     767.5 ms ¬±   3.4 ms    [User: 591.9 ms, System: 163.8 ms]
  Range (min ‚Ä¶ max):   762.2 ms ‚Ä¶ 772.7 ms    10 runs

Summary
  python test_rnzb.py ran
    8.22 ¬± 0.10 times faster than python test_nzb.py
```

The above benchmark was performed by looping over 10 random NZB files I had lying around. This benchmark isn't super scientific, but it gives a pretty good idea of the performance difference.

## Supported platforms

Refer to the following table for the platforms and Python versions for which `rnzb` publishes prebuilt wheels:

| Platform                            | CPython 3.9-3.13 | CPython 3.13 (t) | PyPy 3.9-3.10 |
| ----------------------------------- | ---------------- | ---------------- | ------------- |
| üêß Linux (`x86_64`, `glibc>=2.28`)  | ‚úÖ               | ‚úÖ               | ‚úÖ            |
| üêß Linux (`x86_64`, `musl>=1.2`)    | ‚úÖ               | ‚úÖ               | ‚úÖ            |
| üêß Linux (`aarch64`, `glibc>=2.28`) | ‚úÖ               | ‚úÖ               | ‚úÖ            |
| üêß Linux (`aarch64`, `musl>=1.2`)   | ‚úÖ               | ‚úÖ               | ‚úÖ            |
| ü™ü Windows (`x86`)                  | ‚úÖ               | ‚úÖ               | ‚ùå            |
| ü™ü Windows (`x86_64`)               | ‚úÖ               | ‚úÖ               | ‚úÖ            |
| üçè macOS (`x86_64`)                 | ‚úÖ               | ‚úÖ               | ‚úÖ            |
| üçè macOS (`arm64`)                  | ‚úÖ               | ‚úÖ               | ‚úÖ            |

The library itself is not inherently tied to any specific platform or Python version. The available wheels are based on what can be (reasonably) built using GitHub Actions.

## Building from source

Building from source requires the [Rust toolchain](https://rustup.rs/) and [Python 3.9+](https://www.python.org/downloads/).

- With [`uv`](https://docs.astral.sh/uv/):

  ```bash
  git clone https://github.com/Ravencentric/rnzb
  cd rnzb
  uv build
  ```

- With [`pypa/build`](https://github.com/pypa/build):

  ```bash
  git clone https://github.com/Ravencentric/rnzb
  cd rnzb
  python -m build
  ```

## License

Licensed under either of:

- Apache License, Version 2.0 ([LICENSE-APACHE](https://github.com/Ravencentric/rnzb/blob/main/LICENSE-APACHE) or <https://www.apache.org/licenses/LICENSE-2.0>)
- MIT license ([LICENSE-MIT](https://github.com/Ravencentric/rnzb/blob/main/LICENSE-MIT) or <https://opensource.org/licenses/MIT>)

at your option.

## Contributing

Contributions are welcome! Unless you explicitly state otherwise, any contribution intentionally submitted for inclusion in the work by you, as defined in the Apache-2.0 license, shall be dual licensed as above, without any additional terms or conditions.

