syntax = "proto3";

// import "nanopb.proto";

package mimic;

message SpoolSensor
{
  float angle = 1;
  bool status = 2;
}

message Motor
{
  enum Mode
  {
    OFF = 0;
    CALIBRATE = 1;
    POS_CTRL = 2;
    CUR_LIM_POS_CTRL = 3;
  }

  int32 motorid = 1;
  double position = 2;
  double current = 3;
  SpoolSensor spool = 4;
}

message PID
{
  float Kp = 1;
  float Ki = 2;
  float Kd = 3;
  float Kb = 4;
}

message HAND_ID
{
  string id = 1; // [(nanopb).max_size = 32];
}

message Message
{
    enum Command
    {
      NOP = 0;
      GET_UART_ID = 1;
      SET_UART_ID = 2;
      INIT_MOTORS = 3;
      SET_MOTOR_MODE = 4;
      GET_MOTOR_POS = 5;
      SET_MOTOR_POS = 6;
      GET_MOTOR_CURRENT = 7;
      INIT_SPOOL_SENSORS = 8;
      GET_SPOOL_ANGLES = 9;
      GET_MOTOR_DATA = 10;
      SET_PID_VALUES = 11;
      SET_CURRENT_LIMIT = 12;
      GET_HAND_ID = 13;
      SET_HAND_ID = 14;
    }

    int32 address = 1;
    Command command = 2;
    int32 metaData = 3;
    repeated Motor motors = 4; // [(nanopb).max_count = 4];
    PID pid = 5;
    HAND_ID hand_id = 6;
}
