import{o as l,c as p,b as a,h as W,W as ke,r as x,F as Y,n as ie,v as L,w,Z as ae,D as n,t as q,a1 as fe,a2 as pe,d as r,a3 as Re,a4 as Ae,M as F,b5 as Z,G as X,N as z,X as xe,a0 as Oe,y as se,aY as $e,j as T,K as N,e as we,aW as Be,T as Ne,b0 as Ce,b6 as ze,b1 as De,a6 as Fe,a7 as ge,a as qe,a8 as He,a9 as We,ab as Ye,ac as Ze,ad as Qe,i as Ge,B as Je,k as K,l as Ke,m as Xe,$ as ve,E as C,L as ye,P as J,R as et,S as tt,U as st}from"./B0OuR9xi.js";import{a as ot,r as rt}from"./Bkg23qCy.js";import{d as Te,r as be,_ as nt,a as lt,b as at,c as it,f as ut,e as dt}from"./DTMGP6xx.js";import{_ as ct}from"./DkjJWMTY.js";import{_ as mt}from"./C4g72jM9.js";import{s as he,T as ft,l as pt,d as gt,_ as vt}from"./B_ioTAU5.js";import{u as yt}from"./Cv6xefjx.js";import"./BmrREbtp.js";function _e(S,s){return l(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"})])}function bt(S,s){return l(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"})])}const ht={base:"animate-pulse",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-md"},_t={class:"mb-4"},kt={class:""},xt={class:"relative rounded-lg shadow flex divide-x divide-gray-200 dark:divide-gray-700","aria-label":"Tabs"},$t=["to","onClick"],wt=["onClick"],Ct=["onClick"],Tt={class:"absolute right-[1em] focus:outline-none"},Vt=a("span",{"aria-hidden":"true",class:"absolute inset-x-0 bottom-0 h-0.5 bg-transparent dark:bg-gray-600"},null,-1),Lt=W({__name:"LiveTabs",props:{currentTab:{},tabs:{}},emits:["close","cancel"],setup(S,{emit:s}){const _=ke(),y=x(_.params.id),g=x(!1),t=x(!1),V=x(null),b=x(null),c=s;function m(i){if(Object.keys(Z().tabs).length>=X().planLimits.live_trading_tabs){z("error",`You have reached the limit of "${X().planLimits.live_trading_tabs}" tabs for your "${X().plan}" plan. Please upgrade your plan to add more tabs.`);return}Z().addTab(i)}function $(i){xe().push(`/live/${i}`)}function P(i){if(!i.form.routes.length)return"New Tab";if(i.results.exception.error&&i.results.monitoring)return"Error";const f=i.form.routes[0];let d="";const U=i.form.exchange;return U&&(d+=`${U} â€¢ `),f.strategy&&(d+=`${f.strategy} â€¢ `),f.symbol&&(d+=`${f.symbol} â€¢ `),f.timeframe&&(d+=`${f.timeframe}`),d=d.endsWith(" â€¢ ")?d.slice(0,-3):d,i.results.monitoring&&!i.results.finished?`ðŸŸ¢ ${d}`:i.results.exception.error&&i.results.monitoring?`ðŸ”´ ${d}`:i.results.showResults?`${d} | Results`:d}function j(i){V.value=i.id,i.results.exception.error||i.results.finished||i.results.booting?g.value=!0:c("close",V.value)}return(i,f)=>{const d=Oe,U=se,H=$e;return l(),p("div",_t,[a("div",kt,[a("nav",xt,[(l(!0),p(Y,null,ie(i.tabs,h=>(l(),L(d,{key:h.id,class:"relative group min-w-0 flex-1 overflow-hidden text-center flex items-center",text:P(h),"open-delay":700,onMouseup:Ae(D=>j(h),["middle"])},{default:w(()=>[a("div",{to:`/live/${h.id}`,class:ae([h.id===n(y)?"text-gray-900 dark:text-gray-100 font-bold ":"text-gray-500 dark:text-gray-300 hover:text-gray-700 font-medium ","whitespace-nowrap py-3 px-4 inline-block select-none cursor-pointer focus:outline-none w-full text-xs bg-gray-50 dark:bg-backdrop-dark"]),onClick:D=>$(h.id)},[a("span",null,q(P(h)),1),a("span",{"aria-hidden":"true",class:ae([h.id===n(y)&&Object.keys(i.tabs).length>1?"bg-indigo-400":"bg-transparent dark:bg-gray-600","absolute inset-x-0 bottom-0 h-0.5"])},null,2)],10,$t),(h.results.booting||h.results.monitoring)&&!h.results.finished?fe((l(),p("button",{key:0,class:"absolute right-[0.5em] focus:outline-none",onClick:D=>{t.value=!0,b.value=h.id}},[r(n(ot),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,wt)),[[pe,Object.keys(i.tabs).length>1]]):fe((l(),p("button",{key:1,class:"hidden md:block absolute right-[0.5em] focus:outline-none",onClick:D=>j(h)},[r(n(Re),{class:"h-5 w-5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 bg-gray-100 dark:bg-gray-700 rounded-full","aria-hidden":"true"})],8,Ct)),[[pe,Object.keys(i.tabs).length>1]])]),_:2},1032,["text","onMouseup"]))),128)),r(d,{text:"New Tab",popper:{arrow:!0}},{default:w(()=>[a("div",{class:"select-none cursor-pointer text-gray-400 dark:text-gray-100 hover:text-gray-600 focus:outline-none group relative w-14 overflow-hidden bg-gray-50 dark:bg-backdrop-dark py-3 px-4 font-medium hover:bg-gray-50 dark:hover:bg-gray-800 flex items-center justify-center",onClick:f[0]||(f[0]=h=>m(i.currentTab))},[a("button",Tt,[r(n(rt),{class:"h-6 w-6 rounded-full","aria-hidden":"true"})]),Vt])]),_:1})])]),r(H,{modelValue:n(t),"onUpdate:modelValue":f[2]||(f[2]=h=>F(t)?t.value=h:null),title:"Termination Confirm",description:"Are you sure you want to terminate this session?",type:"info"},{default:w(()=>[r(U,{variant:"solid",color:"red",class:"flex justify-center",label:"Terminate",onClick:f[1]||(f[1]=h=>{c("cancel",n(b)),t.value=!1})})]),_:1},8,["modelValue"]),r(H,{modelValue:n(g),"onUpdate:modelValue":f[4]||(f[4]=h=>F(g)?g.value=h:null),title:"Close Live Tab Confirm",description:"Are you sure you want to close this tab?",cancelBtnContent:"cancel",type:"info"},{default:w(()=>[r(U,{variant:"solid",color:"red",class:"flex justify-center",label:"Close",onClick:f[3]||(f[3]=h=>{c("close",n(V)),g.value=!1})})]),_:1},8,["modelValue"])])}}}),St=W({__name:"LiveOrders",props:{orders:{}},setup(S){const s=S,_=T(()=>{if(!s.orders.length)return[];const y=[];for(let g=s.orders.length-1;g>=0;g--){const t=s.orders[g];y.push([{value:t.id.slice(-12),style:"text-xs",tooltip:t.id,tag:"code"},{value:N.timestampToTimeOnly(t.created_at),style:"text-xs",tooltip:N.timestampToTime(t.created_at)},{value:t.symbol,style:"text-xs"},{value:t.type,style:"text-xs"},{value:t.side,style:N.colorBasedOnSide(t.side)},{value:t.price,style:"text-xs"},{value:t.qty,style:N.colorBasedOnSide(t.side)},{value:t.status,style:"text-xs"}])}return y});return(y,g)=>{const t=Te,V=ct;return n(_).length?(l(),L(t,{key:0,data:n(_),"header-items":["ID","Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])):(l(),L(V,{key:1}))}}}),Et=a("p",null," If you think something is wrong with your running live session, you can submit a report. By submitting this form, the logs of this session will be sent to Jesse's developers so we can see what's going on. ",-1),It=a("br",null,null,-1),Pt=a("p",null,[we("Your exchange API keys and strategies are safe and "),a("b",null,"are never sent to us.")],-1),jt=a("br",null,null,-1),Ut=a("br",null,null,-1),Mt=a("br",null,null,-1),Rt={class:"flex justify-end item-center"},At={class:"flex justify-end"},Ot=W({__name:"ReportLiveSession",props:{session:{}},emits:["close"],setup(S,{emit:s}){const _=s,y=x(!1),g=S,t=x({description:"",email:""}),V=()=>{_("close")},b=async()=>{if(y.value=!0,!t.value.description){z("error","Please enter a description."),y.value=!1;return}const{data:c,error:m}=await Be("/report-exception",{description:t.value.description,email:t.value.email,traceback:"manual report",mode:"live",attach_logs:!0,session_id:g.session},!0);if(y.value=!1,m.value&&m.value.statusCode!==200){z("error",`[${m.value.statusCode}]: ${m.value.statusText}`);return}const $=c.value;$.status==="success"?(t.value.description="",t.value.email="",z("success",$.message),V()):$.status==="error"&&z("error",$.message)};return(c,m)=>{const $=Ne,P=Ce,j=ze,i=se,f=De;return l(),p(Y,null,[Et,It,Pt,jt,r(f,{state:n(t),class:"space-y-4",onSubmit:b},{default:w(()=>[r(P,{label:"Email (optional)",help:"Enter your email address for us to know who sent the email and possibly reply back to you."},{default:w(()=>[r($,{modelValue:n(t).email,"onUpdate:modelValue":m[0]||(m[0]=d=>n(t).email=d),placeholder:"Email address...",type:"email"},null,8,["modelValue"])]),_:1}),Ut,r(P,{label:"Description:",name:"Description"},{default:w(()=>[r(j,{modelValue:n(t).description,"onUpdate:modelValue":m[1]||(m[1]=d=>n(t).description=d),rows:10,placeholder:"Describe what you think is wrong in this session..."},null,8,["modelValue"])]),_:1}),Mt,a("div",Rt,[a("div",At,[r(i,{color:"gray",variant:"link",class:"mr-8",label:"Cancel",onClick:m[2]||(m[2]=d=>V())}),r(i,{type:"submit",class:"w-48 flex justify-center",label:"Submit",loading:n(y),disabled:n(y)},null,8,["loading","disabled"])])])]),_:1},8,["state"])],64)}}}),Bt=Fe(ge.ui.strategy,ge.ui.skeleton,ht),Nt=W({inheritAttrs:!1,props:{class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(S){const{ui:s,attrs:_}=He("skeleton",We(S,"ui"),Bt),y=T(()=>Ye(Ze(s.value.base,s.value.background,s.value.rounded),S.class));return{ui:s,attrs:_,skeletonClass:y}}});function zt(S,s,_,y,g,t){return l(),p("div",Qe({class:S.skeletonClass},S.attrs),null,16)}const Dt=qe(Nt,[["render",zt]]),Ft={class:"mb-16"},qt={key:0,class:"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600 p-4"},Ht={key:1},Wt=W({__name:"CandlesChart",props:{form:{},results:{}},setup(S){const s=Ge(),_=T(()=>Je().params.id),y=x(!0),g=x(2),t=S,V=x();let b=null,c=null;const m={orderEntries:{},positionEntry:null},$=T(()=>s.value),P=t.form.exchange,j=T(()=>`${P}-${t.results.selectedRoute.symbol}-${t.results.selectedRoute.timeframe}`),i=T(()=>t.results.currentCandles),f=T(()=>{const v=t.results.positions.find(k=>k[0].value===t.results.selectedRoute.symbol);return v===void 0?[]:v}),d=T(()=>f.value[2].value),U=T(()=>Number(f.value[1].value)>0?"long":Number(f.value[1].value)<0?"short":"close");K(i,(v,k)=>{c!==null&&oe(v[j.value])}),K($,v=>{te(v)}),K(d,(v,k)=>{c!==null&&v!==k&&D()}),K(()=>t.results.orders,()=>{c!==null&&ee()},{deep:!0}),Ke(async()=>{setTimeout(async()=>{await H()},200)});async function H(){y.value=!0,await Z().fetchCandles(_.value),y.value=!1,he.width=V.value.clientWidth,b=ft(V.value,he),b.applyOptions({watermark:{visible:!0,fontSize:16,horzAlign:"left",vertAlign:"bottom",color:"#888",text:`${t.results.selectedRoute.symbol} â€¢ ${t.results.selectedRoute.timeframe}`}}),c=b.addCandlestickSeries(),c.setData(t.results.candles),b.timeScale().fitContent(),c.applyOptions({priceFormat:{type:"price",precision:g.value,minMove:.01}}),D(),ee(),te($.value)}Xe(()=>{h()});function h(){b!==null&&(b.remove(),b=null),c&&(c=null)}function D(){const v=U.value==="long"?"#00AB5C":"#FF497D";if(m.positionEntry&&c.removePriceLine(m.positionEntry),Number(d.value)>0){const k={price:Number(d.value),color:v,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:"Entry Price"};m.positionEntry=c.createPriceLine(k)}}function ee(){const v=f.value[0].value;for(const k in m.orderEntries)c.removePriceLine(m.orderEntries[k]),delete m.orderEntries[k];t.results.orders.forEach(k=>{const I=k.side==="buy"?"#00AB5C":"#FF497D",O=ve.startCase(ve.lowerCase(`${k.side} ${k.type}`));if((k.status==="ACTIVE"||k.status==="QUEUED")&&k.symbol===v){const B={price:Number(k.price),color:I,lineWidth:1,lineStyle:0,axisLabelVisible:!0,title:O};m.orderEntries[k.id]=c.createPriceLine(B)}})}function oe(v){if(v===void 0)throw new TypeError("candle is undefined!");if(t.results.candles.length===0||t.results.candles[t.results.candles.length-1].time>v.time)return;const I=String(v.open).indexOf("."),O=I===-1?0:String(v.open).length-I-1;g.value!==O&&(g.value=O,(g.value<0||g.value>100)&&(g.value=0),c.applyOptions({priceFormat:{type:"price",precision:g.value,minMove:Math.pow(10,-O).toFixed(O)}})),c.update(v)}function te(v){b!==null&&b.applyOptions(v==="light"?pt.chart:gt.chart)}function re(v){t.results.selectedRoute=v,h(),H()}return(v,k)=>{const I=Dt,O=se;return l(),p("div",Ft,[n(y)?(l(),p("div",qt,[r(I,{class:"h-4 w-full mb-4"}),r(I,{class:"h-4 w-2/3 mb-4"}),r(I,{class:"h-4 w-1/2 mb-4"}),r(I,{class:"h-4 w-full mb-4"}),r(I,{class:"h-4 w-full mb-4"}),r(I,{class:"h-4 w-2/3 mb-4"}),r(I,{class:"h-4 w-full mb-4"}),r(I,{class:"h-4 w-full"})])):C("",!0),a("div",{ref_key:"chartContainer",ref:V,class:ae({"rounded overflow-hidden border-2 border-gray-100 dark:border-gray-600":!n(y)})},null,2),t.form.routes.length>1?(l(),p("div",Ht,[(l(!0),p(Y,null,ie(t.form.routes,B=>(l(),L(O,{key:B.symbol,variant:"soft",color:"gray",disabled:v.results.selectedRoute.symbol===B.symbol&&v.results.selectedRoute.timeframe===B.timeframe,class:"mt-2 mr-2",onClick:ue=>re(B)},{default:w(()=>[we(q(B.symbol)+" â€¢ "+q(B.timeframe),1)]),_:2},1032,["disabled","onClick"]))),128))])):C("",!0)])}}}),Yt={key:0,class:"flex flex-col items-center justify-center select-none mt-[10%]"},Zt=["textContent"],Qt={class:"mt-8"},Gt={key:1,class:"mx-auto container mt-8"},Jt={key:0,"data-cy":"live-page-content"},Kt={class:"flex justify-between items-center"},Xt=a("span",null," No exchange API keys found. Please add at least one: ",-1),es={class:"grid grid-cols-1 gap-6"},ts={class:"flex justify-between items-center"},ss=a("span",null," No notification API keys found. Please add at least one: ",-1),os={key:1},rs={key:0,class:"mb-8"},ns=a("span",null,"More",-1),ls={key:0},as={key:0,class:"mt-8 lg:mt-0"},is={key:1,"data-cy":"live-action-button"},us={key:1,class:"my-8 border-2 dark:border-gray-600 rounded-full"},ds={key:2,class:"bg-white dark:bg-gray-700 grid grid-cols-1 gap-6 border dark:border-gray-600 rounded py-4 px-6 select-none"},cs={class:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate"},ms={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},fs={class:"flex justify-between items-center"},ps={class:"flex justify-start items-center"},gs=a("span",null,"Info Logs:",-1),vs={class:"focus:outline-none flex justify-start items-center"},ys={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},bs={class:"flex justify-between items-center"},hs={class:"flex justify-start items-center"},_s=a("span",null,"Error Logs:",-1),ks={class:"focus:outline-none flex justify-start items-center"},xs={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},$s={key:3},ws=W({__name:"LiveTab",props:{form:{},results:{},session:{},tabs:{}},setup(S){const s=S,_=x([]),y=x(!1),g=x(!1),t=x(!1),V=x(!1),b=x(!1),c=x(!1),m=x(!1),$=x(!1),P=x(!1),j=x(!1),i=X(),f=Z(),d=x([]);async function U(){if(!(s.results.monitoring||s.results.booting)){if(!s.form.paper_mode){const e=i.exchangeApiKeys.find(o=>o.id===s.form.exchange_api_key_id);e&&(s.form.exchange=e.exchange)}try{d.value.length||(d.value=await X().getExchangeSupportedSymbols(s.form.exchange));for(let e=0;e<s.form.routes.length;e++)d.value.includes(s.form.routes[e].symbol)||(s.form.routes[e].symbol=d.value[0]);if(s.form.data_routes.length>0)for(let e=0;e<s.form.data_routes.length;e++)d.value.includes(s.form.data_routes[e].symbol)||(s.form.data_routes[e].symbol=d.value[0])}catch(e){console.error("Error updating supported symbols:",e)}}}s.form.exchange&&(!s.results.monitoring&&!s.results.booting||!d.value.length)&&U(),K(()=>s.form.exchange,async(e,o)=>{e!==o&&(d.value=[],await U())});const H=T(()=>{const e=[{label:"Exchange",value:s.results.generalInfo.exchange},{label:"Current Time",value:N.timestampToTime(s.results.generalInfo.current_time)},{label:"Debug Mode",value:s.results.generalInfo.debug_mode},{label:"Paper Trade",value:s.results.generalInfo.paper_mode},{label:"PNL",value:`${s.results.generalInfo.pnl} (${s.results.generalInfo.pnl_perc}%)`},{label:"Started",value:N.timestampToTime(s.results.generalInfo.started_at)},{label:"Started/Current Balance",value:`${s.results.generalInfo.started_balance} / ${s.results.generalInfo.current_balance}`},{label:"Trades",value:`${s.results.generalInfo.count_trades}`}];return s.results.generalInfo.leverage_type!=="spot"&&(e.push({label:"Available Margin",value:`${s.results.generalInfo.available_margin}`}),e.push({label:"Leverage",value:`${s.results.generalInfo.leverage}x (${s.results.generalInfo.leverage_type})`})),e}),h=T(()=>i.notificationApiKeys.map(e=>({label:`${e.name} - ${e.driver}`,value:e.id}))),D=T(()=>Math.round(s.results.progressbar.estimated_remaining_seconds)===0?"Please wait...":`${Math.round(s.results.progressbar.estimated_remaining_seconds)} seconds remaining...`),ee=T(()=>{if(!s.results.orders)return[];const e=[],o=5,M=s.results.orders.length,R=M-o>=0?M-o:0;for(let Q=M-1;Q>=R;Q--){const E=s.results.orders[Q],A=E.status==="PARTIALLY FILLED"?`${E.filled_qty}/${E.qty}`:E.qty;e.push([{value:N.timestampToTimeOnly(E.created_at),style:"text-xs",tooltip:N.timestampToTime(E.created_at)},{value:E.symbol,style:"text-xs"},{value:E.type,style:"text-xs"},{value:E.side,style:N.colorBasedOnSide(E.side)},{value:E.price,style:"text-xs"},{value:A,style:N.colorBasedOnSide(E.side)},{value:E.status,style:"text-xs"}])}return e}),oe=T(()=>{let e=[];const o=i.jesseSupportedTimeframes;return i.settings.live.generate_candles_from_1m||!s.form.exchange?e=o.map(M=>i.planLimits.timeframes.includes(M)?{label:M,value:M,disabled:!1}:{label:`${M} (Upgrade required)`,value:M,disabled:!0}):e=i.exchangeInfo[s.form.exchange].supported_timeframes.map(R=>i.planLimits.timeframes.includes(R)?{label:R,value:R,disabled:!1}:{label:`${R} (Upgrade required)`,value:R,disabled:!0}),e}),te=T(()=>i.liveTradingExchangeNames.map(e=>i.planLimits.exchanges.includes(e)?{label:e,value:e,disabled:!1}:{label:`${e} (Upgrade required)`,value:e,disabled:!0})),re=T(()=>i.exchangeApiKeys.map(e=>i.planLimits.exchanges.includes(e.exchange)?{label:`${e.exchange} - ${e.name}`,value:e.id,disabled:!1}:{label:`${e.exchange} - ${e.name} (Upgrade required)`,value:e.id,disabled:!0})),v=f.cancel,k=f.newLive;function I(e){if(_.value.length){for(let o=0;o<_.value.length;o++)z("error",_.value[o]);return}if(s.form.paper_mode&&!s.form.exchange||!s.form.paper_mode&&s.form.exchange_api_key_id===""){z("error","Please select an exchange");return}f.start(e)}function O(e){f.closeTab(e)}function B(e){j.value=!1,f.stop(e)}function ue(){g.value=!0,navigator.clipboard.writeText(s.results.infoLogs),z("success","Logs copied successfully"),V.value=!0,setTimeout(()=>{V.value=!1},3e3)}function Ve(){t.value=!0,navigator.clipboard.writeText(s.results.errorLogs),z("success","Logs copied successfully"),b.value=!0,setTimeout(()=>{b.value=!1},3e3)}const de=T(()=>["basic","pro","enterprise","basic-lifetime","pro-lifetime","enterprise-lifetime","lifetime"].includes(i.plan));return(e,o)=>{const M=St,R=et,Q=Ot,E=nt,A=se,Le=$e,Se=lt,ce=at,G=tt,ne=mt,Ee=it,me=st,Ie=Ce,Pe=Wt,le=Te,je=ut,Ue=vt,Me=dt;return l(),p(Y,null,[r(R,{modelValue:n(c),"onUpdate:modelValue":o[0]||(o[0]=u=>F(c)?c.value=u:null),size:"ultra",title:"Orders"},{default:w(()=>[r(M,{orders:e.results.orders},null,8,["orders"])]),_:1},8,["modelValue"]),r(R,{modelValue:n(m),"onUpdate:modelValue":o[2]||(o[2]=u=>F(m)?m.value=u:null),size:"small",title:"Report An Issue"},{default:w(()=>[r(Q,{session:e.session,onClose:o[1]||(o[1]=u=>m.value=!1)},null,8,["session"])]),_:1},8,["modelValue"]),r(R,{modelValue:n($),"onUpdate:modelValue":o[3]||(o[3]=u=>F($)?$.value=u:null),title:"Info Logs"},{default:w(()=>[r(E,{logs:e.results.infoLogs},null,8,["logs"])]),buttons:w(()=>[a("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:ue},[n(V)?(l(),L(n(ye),{key:0,class:"h-6 w-6","aria-hidden":"true"})):C("",!0),!n(V)&&e.results.infoLogs.length!=0?(l(),L(n(be),{key:1,class:"h-6 w-6","aria-hidden":"true"})):C("",!0)])]),_:1},8,["modelValue"]),r(R,{modelValue:n(P),"onUpdate:modelValue":o[4]||(o[4]=u=>F(P)?P.value=u:null),title:"Error Logs"},{default:w(()=>[r(E,{logs:e.results.errorLogs},null,8,["logs"])]),buttons:w(()=>[a("button",{class:"ml-2 p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none",onClick:Ve},[n(b)?(l(),L(n(ye),{key:0,class:"h-6 w-6","aria-hidden":"true"})):C("",!0),!n(b)&&e.results.errorLogs.length!=0?(l(),L(n(be),{key:1,class:"h-6 w-6","aria-hidden":"true"})):C("",!0)])]),_:1},8,["modelValue"]),r(Le,{modelValue:n(j),"onUpdate:modelValue":o[6]||(o[6]=u=>F(j)?j.value=u:null),title:"Termination Confirm",description:"Are you sure you want to terminate this session?",type:"info"},{default:w(()=>[r(A,{variant:"solid",color:"red",class:"flex justify-center",label:"Terminate",onClick:o[5]||(o[5]=u=>B((e._.provides[J]||e.$route).params.id))})]),_:1},8,["modelValue"]),e.results.booting?(l(),p("div",Yt,[a("div",null,[r(Se,{progress:e.results.progressbar.current},null,8,["progress"])]),e.results.exception.error?C("",!0):(l(),p("h3",{key:0,class:"mt-8 animate-pulse",textContent:q(n(D))},null,8,Zt)),a("div",Qt,[e.form.debug_mode?(l(),L(A,{key:0,icon:"i-heroicons-clipboard-document-list",variant:"solid",label:"View Logs",size:"xl",class:"flex justify-center w-64",onClick:o[7]||(o[7]=u=>$.value=!0)})):C("",!0),r(A,{color:"gray",class:"w-64 flex justify-center mt-4",size:"xl",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},icon:"i-heroicons-no-symbol",variant:"solid",label:"Cancel",trailing:!1,onClick:o[8]||(o[8]=u=>n(v)((e._.provides[J]||e.$route).params.id))})]),e.results.exception.error?(l(),p("div",Gt,[r(ce,{modelValue:n(y),"onUpdate:modelValue":o[9]||(o[9]=u=>F(y)?y.value=u:null),title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["modelValue","title","content","debug-mode"])])):C("",!0)])):(l(),L(Me,{key:1},{left:w(()=>[!e.results.booting&&!e.results.monitoring&&!e.results.showResults?(l(),p("div",Jt,[r(G,{class:"mb-4",title:"Exchange"}),e.form.paper_mode?(l(),L(ne,{key:0,modelValue:e.form.exchange,"onUpdate:modelValue":o[10]||(o[10]=u=>e.form.exchange=u),placeholder:"Select an exchange...",searchable:"",options:n(te),"value-attribute":"value",size:"lg",class:"mt-2 mb-16",onChange:U},null,8,["modelValue","options"])):(l(),L(ne,{key:1,modelValue:e.form.exchange_api_key_id,"onUpdate:modelValue":o[11]||(o[11]=u=>e.form.exchange_api_key_id=u),placeholder:"Select an exchange...",searchable:"",options:n(re),"value-attribute":"value",size:"lg",class:"mt-2 mb-16",onChange:U},{empty:w(()=>[a("div",Kt,[Xt,r(A,{to:"/exchange-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Exchange API Key"})])]),_:1},8,["modelValue","options"])),r(Ee,{"total-routes-error":n(_),form:e.form,results:e.results,mode:"live",symbols:n(d),timeframes:n(oe)},null,8,["total-routes-error","form","results","symbols","timeframes"]),r(G,{class:"mt-16 mb-4",title:"Options"}),a("div",es,[r(me,{modelValue:e.form.debug_mode,"onUpdate:modelValue":o[12]||(o[12]=u=>e.form.debug_mode=u),title:"Debug Mode",description:"Logs more details, helpful for debugging."},null,8,["modelValue"]),r(me,{modelValue:e.form.paper_mode,"onUpdate:modelValue":o[13]||(o[13]=u=>e.form.paper_mode=u),title:"Paper Trade",disabled:!n(de),"disabled-guide":n(de)?"":"Premium plan required",description:"Trade in real-time using actual exchange data with PAPER money."},null,8,["modelValue","disabled","disabled-guide"]),r(Ie,{label:"Notifications:",help:"Select a notification driver to receive notifications"},{default:w(()=>[r(ne,{modelValue:e.form.notification_api_key_id,"onUpdate:modelValue":o[14]||(o[14]=u=>e.form.notification_api_key_id=u),placeholder:"Select a notification driver",size:"lg",options:n(h),"value-attribute":"value"},{empty:w(()=>[a("div",ts,[ss,r(A,{to:"/notification-api-keys",icon:"i-heroicons-plus",type:"link",variant:"solid",size:"sm",label:"Add Notification API Key"})])]),_:1},8,["modelValue","options"])]),_:1})])])):C("",!0),e.results.monitoring?(l(),p("div",os,[e.results.exception.error?(l(),p("div",rs,[r(ce,{title:e.results.exception.error,content:e.results.exception.traceback,mode:"live","debug-mode":e.form.debug_mode},null,8,["title","content","debug-mode"])])):C("",!0),e.results.monitoring&&!e.results.finished&&!e.results.exception.error?(l(),L(Pe,{key:1,results:e.results,form:e.form,exchange:e.form.exchange},null,8,["results","form","exchange"])):C("",!0),r(G,{class:"mb-4",title:"Routes"}),r(le,{data:e.results.routes,"header-items":["Symbol","Timeframe","Strategy"],header:""},null,8,["data"]),r(G,{class:"mt-12 mb-4",title:"Positions"}),r(le,{data:e.results.positions,"header-items":["Symbol","QTY","Entry","Price","Liq Price","PNL"],header:""},null,8,["data"]),r(je,{class:"mt-12 mb-4",title:"Orders"},{default:w(()=>[a("button",{type:"button",class:"inline-flex items-center shadow-sm px-4 py-1.5 border border-gray-300 dark:border-gray-900 text-sm leading-5 font-medium rounded-full text-gray-700 dark:text-gray-100 bg-white dark:bg-backdrop-dark hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none",onClick:o[15]||(o[15]=u=>c.value=!0)},[r(n(bt),{class:"-ml-1.5 mr-1 h-5 w-5 text-gray-400","aria-hidden":"true"}),ns])]),_:1}),r(le,{data:n(ee),"header-items":["Created","Symbol","Type","Side","Price","QTY","Status"],header:""},null,8,["data"])])):C("",!0)]),right:w(()=>[e.results.booting?C("",!0):(l(),p("div",ls,[e.results.monitoring?(l(),p("div",as,[e.results.finished?(l(),L(A,{key:0,class:"w-full flex justify-center",variant:"solid",icon:"i-heroicons-plus",size:"xl",label:"New session",onClick:o[16]||(o[16]=u=>n(k)((e._.provides[J]||e.$route).params.id))})):(l(),L(A,{key:1,class:"w-full flex justify-center",variant:"solid",color:"gray",icon:"i-heroicons-no-symbol",size:"xl",label:e.results.terminating?"Terminating...":"Terminate",ui:{color:{gray:{solid:"text-rose-500 dark:text-rose-400"}}},onClick:o[17]||(o[17]=u=>j.value=!0)},null,8,["label"])),e.results.monitoring||e.results.finished?(l(),L(A,{key:2,class:"w-full flex justify-center mt-4",variant:"solid",color:"gray",icon:"i-heroicons-flag",size:"xl",label:"Report",onClick:o[18]||(o[18]=u=>m.value=!0)})):C("",!0)])):(l(),p("div",is,[r(A,{class:"w-full flex justify-center",icon:"i-heroicons-bolt",size:"xl",variant:"solid",label:"Start",trailing:!1,onClick:o[19]||(o[19]=u=>I((e._.provides[J]||e.$route).params.id))}),Object.keys(e.tabs).length>1?(l(),L(A,{key:0,class:"w-full md:hidden flex justify-center mt-2",icon:"i-heroicons-x-mark",size:"xl",variant:"solid",color:"gray",label:"Close Tab",trailing:!1,onClick:o[20]||(o[20]=u=>O((e._.provides[J]||e.$route).params.id))})):C("",!0)]))])),e.results.monitoring?(l(),p("hr",us)):C("",!0),e.results.monitoring?(l(),p("dl",ds,[(l(!0),p(Y,null,ie(n(H),u=>(l(),p("div",{key:u.label,class:"flex justify-between items-center"},[a("div",cs,q(u.label)+":",1),a("div",ms,q(u.value),1)]))),128)),a("div",fs,[a("div",ps,[a("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:o[21]||(o[21]=u=>$.value=!0)},[gs,a("span",vs,[r(n(_e),{class:"w-6 h-6 ml-2"})])])]),a("div",ys,q(e.results.generalInfo.count_info_logs),1)]),a("div",bs,[a("div",hs,[a("button",{class:"text-sm font-medium text-gray-500 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300 truncate flex items-center hover:underline cursor-pointer focus:outline-none",onClick:o[22]||(o[22]=u=>P.value=!0)},[_s,a("span",ks,[r(n(_e),{class:"w-6 h-6 ml-2 cursor-pointer"})])])]),a("div",xs,q(e.results.generalInfo.count_error_logs),1)])])):C("",!0),e.results.monitoring&&e.results.watchlist.length?(l(),p("div",$s,[r(G,{class:"mt-8 mb-4",title:"Watch List"}),r(Ue,{data:e.results.watchlist},null,8,["data"])])):C("",!0)]),_:1}))],64)}}}),Cs={class:"w-full"},Us=W({__name:"[id]",setup(S){yt({title:"Live/Paper trading - Jesse"});const s=Z(),_=T(()=>s.tabs),y=ke(),g=T(()=>y.params.id),t=T(()=>{if(!_.value[g.value]){const b=Object.keys(_.value);if(b.length>0){const c=_.value[b[0]];return xe().push(`/live/${c.id}`),c}}return _.value[g.value]});(!Object.keys(t.value).includes("selectedRoute")||Object.keys(t.value.results.selectedRoute).length==0||V(t.value.results.selectedRoute,t.value.form.routes[0]))&&(t.value.results.selectedRoute=t.value.form.routes[0]),t.value.form.exchange==""&&(t.value.form.exchange=t.value.results.generalInfo.exchange),Object.keys(_.value).length===0&&Z().addTab();function V(b,c){return b.length!==c.length?!1:b.every((m,$)=>m===c[$])}return(b,c)=>{const m=Lt,$=ws;return l(),p(Y,null,[a("div",Cs,[r(m,{"current-tab":t.value?t.value.id:null,tabs:_.value,onClose:n(s).closeTab,onCancel:n(s).cancel},null,8,["current-tab","tabs","onClose","onCancel"])]),t.value?(l(),L($,{key:0,form:t.value.form,results:t.value.results,session:g.value,tabs:_.value},null,8,["form","results","session","tabs"])):C("",!0)],64)}}});export{Us as default};
